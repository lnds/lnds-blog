<!DOCTYPE html>
<html lang="es-cl" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Buggy nights | La Naturaleza del Software</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/posts/2011/buggy-nights/">
  <meta property="og:site_name" content="La Naturaleza del Software">
  <meta property="og:title" content="Buggy nights">
  <meta property="og:description" content="Un pequeño error de tipeo y se puede perder mucho tiempo, e incluso dinero, o quien sabe, vidas.
Sucede que decidí optimizar cierto programita que estaba tomando unos 10 minutos para cargar un archivo de unos 50.000 registros, eso es bastante para el tipo de operación que se realizaba (solo había que ingresar los datos a dos tablas). Decidí modificar el código para usar un patrón típico de procesamiento de archivos en modo batch, pero como estaba apurado fui poco cuidadoso y el proceso terminó con un tiempo horrible (iba por la hora cuando lo detuve). Y aunque miraba el código no podía percibir el problema. Así que lo dejé para después y en la noche recién lo pude revisar. La solución era tan simple como correr una inserción a una lista al interior de un if, y con esto el tiempo del proceso se redujo a 26 segundos(!).">
  <meta property="og:locale" content="es_cl">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2011-04-12T08:25:11-03:00">
    <meta property="article:modified_time" content="2011-04-12T08:25:11-03:00">
    <meta property="article:tag" content="Bugs">
    <meta property="article:tag" content="Programación">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Buggy nights">
  <meta name="twitter:description" content="Un pequeño error de tipeo y se puede perder mucho tiempo, e incluso dinero, o quien sabe, vidas.
Sucede que decidí optimizar cierto programita que estaba tomando unos 10 minutos para cargar un archivo de unos 50.000 registros, eso es bastante para el tipo de operación que se realizaba (solo había que ingresar los datos a dos tablas). Decidí modificar el código para usar un patrón típico de procesamiento de archivos en modo batch, pero como estaba apurado fui poco cuidadoso y el proceso terminó con un tiempo horrible (iba por la hora cuando lo detuve). Y aunque miraba el código no podía percibir el problema. Así que lo dejé para después y en la noche recién lo pude revisar. La solución era tan simple como correr una inserción a una lista al interior de un if, y con esto el tiempo del proceso se redujo a 26 segundos(!).">

    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/bundle.css">

      <script src="/js/bundle.js"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/" style="color: inherit;">La Naturaleza del Software</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>Buggy nights</h1><time class="dim" datetime="2011-04-12T08:25:11-03:00">April 12, 2011</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/tag/bugs/">#bugs</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/programaci%C3%B3n/">#programación</a>
      </div></ol></div>
  <section class="page-section"><p>Un pequeño error de tipeo y se puede perder mucho tiempo, e incluso
dinero, o quien sabe, vidas.</p>
<p>Sucede que decidí optimizar cierto programita que estaba tomando unos 10
minutos para cargar un archivo de unos 50.000 registros, eso es bastante
para el tipo de operación que se realizaba (solo había que ingresar los
datos a dos tablas). Decidí modificar el código para usar un patrón
típico de procesamiento de archivos en modo batch, pero como estaba
apurado fui poco cuidadoso y el proceso terminó con un tiempo horrible
(iba por la hora cuando lo detuve). Y aunque miraba el código no podía
percibir el problema. Así que lo dejé para después y en la noche recién
lo pude  revisar. La solución era tan simple como correr una inserción a
una lista al interior de un if, y con esto el tiempo del proceso se
redujo a 26 segundos(!).</p>
<p>No es el primer error de este tipo que un programador ha enfrentado. En
enero de 1990 los sistemas de telefónicos en Nueva York  de AT&amp;T
tuvieron un fallo que provocó que la red telefónica completa de Estados
Unidos colapsara.</p>
<p>El error tiene un cierto parecido al bug en mi código.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>         <span style="color:#66d9ef">do</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">switch</span> expression {
</span></span><span style="display:flex;"><span>                  ...
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">case</span> (value)<span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">if</span> (logical) {
</span></span><span style="display:flex;"><span>                           sequence of statements
</span></span><span style="display:flex;"><span>                           <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>                       }
</span></span><span style="display:flex;"><span>                      <span style="color:#66d9ef">else</span>  {
</span></span><span style="display:flex;"><span>                         another sequence of statements
</span></span><span style="display:flex;"><span>                      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                     statements after <span style="color:#66d9ef">if</span>...<span style="color:#66d9ef">else</span> statement
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            statements after <span style="color:#66d9ef">case</span> statement
</span></span><span style="display:flex;"><span>       } <span style="color:#66d9ef">while</span> (expression)
</span></span></code></pre></div><p>El código está tomado de
<a href="http://www.soft.com/AppNotes/attcrash.html">acá</a>.</p>
<p>El programador tenía poca experiencia programando en C, asumió que la
instrucción break (que puse en rojo)  aplicaba a la sentencia if y
esperaba que la secuencia de instrucciones después del if..else se
ejecutara, lo que nunca sucedió.</p>
<p>En mi caso es un programa que por ahora sólo estoy ocupando yo, pero en
el caso de AT&amp;T el costo fue millonario, y el problema de imagen
bastante grave.</p>
<p>Hay que tomarse el tiempo para leer el código, y estar en un estado de
concentración para evitar errores de este tipo, y por supuesto
desarrollar un buen hábito de probar el código antes de pasar a
producción.</p>
<p>El error de AT&amp;T pudo haberse evitado con el uso de herramientas
automatizadas de análisis de código. Si les interesa el tema los dejo
con este video con una charla de Ira Baxter, de Semantics Design sobre
herramientas de este tipo:</p>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 Eduardo Díaz</div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>388 words</span>
    <span>2 - 3 minutes read</span></div><h3>Related</h3>
    <ul><li><a href="/posts/2010/deten-el-reloj-aplasta-al-bicho/">Detén el reloj, aplasta al &#34;bicho&#34;</a></li><li><a href="/posts/2010/la-programaci%C3%B3n-en-10-anos-mas/">La programación en 10 años más</a></li><li><a href="/posts/2011/soberbia/">Soberbia</a></li><li><a href="/posts/2011/knuth-responde-a-todas-las-preguntas-2/">Knuth responde a todas las preguntas</a></li><li><a href="/posts/2011/cuidate-del-estilista/">Cuidate del estilista</a></li></ul></aside></div>
  </div>
</body>
</html>
