<!DOCTYPE html>
<html lang="es-cl" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>¡Bisiesto! | La Naturaleza del Software</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/posts/2012/bisiesto/">
  <meta property="og:site_name" content="La Naturaleza del Software">
  <meta property="og:title" content="¡Bisiesto!">
  <meta property="og:description" content="29 de febrero de 2012, un proceso de validación se negó a funcionar correctamente hoy en mi trabajo. Esencialmente el bug era el siguiente: un programa debía confrontar con una fecha anterior a 10 años atrás. La solución que el programador implementó consiste simplemente en restar 10 al año. Así, para calcular una fecha anterior a 10 años simplemente le resta 10 al año, obteniendo la fecha imaginaria: 29 de febrero de 2002.">
  <meta property="og:locale" content="es_cl">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2012-02-29T22:25:11-03:00">
    <meta property="article:modified_time" content="2012-02-29T22:25:11-03:00">
    <meta property="article:tag" content="Bisiesto">
    <meta property="article:tag" content="Bugs">
    <meta property="article:tag" content="Criptografía">
    <meta property="article:tag" content="Vulnerabilidades">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="¡Bisiesto!">
  <meta name="twitter:description" content="29 de febrero de 2012, un proceso de validación se negó a funcionar correctamente hoy en mi trabajo. Esencialmente el bug era el siguiente: un programa debía confrontar con una fecha anterior a 10 años atrás. La solución que el programador implementó consiste simplemente en restar 10 al año. Así, para calcular una fecha anterior a 10 años simplemente le resta 10 al año, obteniendo la fecha imaginaria: 29 de febrero de 2002.">

    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/bundle.css">

      <script src="/js/bundle.js"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/" style="color: inherit;">La Naturaleza del Software</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>¡Bisiesto!</h1><time class="dim" datetime="2012-02-29T22:25:11-03:00">February 29, 2012</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/tag/bisiesto/">#bisiesto</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/bugs/">#bugs</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/criptograf%C3%ADa/">#criptografía</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/vulnerabilidades/">#vulnerabilidades</a>
      </div></ol></div>
  <section class="page-section"><p>29 de febrero de 2012, un proceso de validación se negó a funcionar
correctamente hoy en mi trabajo. Esencialmente el bug era el siguiente:
un programa debía confrontar con una fecha anterior a 10 años atrás. La
solución que el programador implementó consiste simplemente en restar 10
al año. Así, para calcular una fecha anterior a 10 años simplemente le
resta 10 al año, obteniendo la fecha imaginaria: 29 de febrero de 2002.</p>
<p>Por curioso que pueda parecer el año bisiesto suele provocar problemas a
los programadores.</p>
<p>Al parecer la historia del chat de Gmail mostraba la fecha del 31 de
diciembre de 1969 para todos los mensajes grabado con fecha 29 de enero
de 2012.</p>
<p>Joel Spolsky, co fundador de Stack OverFlow <a href="https://twitter.com/#!/spolsky/status/174999972830384130">se rie en
Twitter</a>:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">haha, we had a leap-year bug on stack overflow today. The author of <a href="http://t.co/FQOVGzkw">http://t.co/FQOVGzkw</a> did not take the community&#39;s advice</p>&mdash; Joel Spolsky (@spolsky) <a href="https://twitter.com/spolsky/status/174999972830384130?ref_src=twsrc%5Etfw">February 29, 2012</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<blockquote>
<p>&ldquo;haha, we had a leap-year bug on stack overflow today. The author
of <a href="http://t.co/FQOVGzkw">http://stackoverflow.com/questions/9/how-do-i-calculate-someones-age-in-c</a> did
not take the community's advice&rdquo;</p></blockquote>
<p>No está muy claro que fue, pero al parecer tuvieron un error al calcular
el año bisiesto.</p>
<p>En 2008 se descubre el bug del bisiesto de Zune, el hoy descontinuado
producto de Microsoft. Se descubre que la versión de 30 Gb de este
dispositivo se congela todos los 31 de diciembre de cualquier año
bisiesto!</p>
<p>El problema del Zune es que al determinar el año quedaba encerrado en un
loop infinito. Lo que ocurría era lo siguiente, el reloj interno del
Zune contaba el tiempo en segundos a partir del 1 de enero de 1980. El
problema estaba (¿está?) en este pedazo de  código:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span> year <span style="color:#f92672">=</span> ORIGINYEAR; <span style="color:#75715e">/* = 1980 */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">while</span> (days <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">365</span>)
</span></span><span style="display:flex;"><span> {
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">IsLeapYear</span>(year))
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">if</span> (days <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">366</span>)
</span></span><span style="display:flex;"><span>         {
</span></span><span style="display:flex;"><span>             days <span style="color:#f92672">-=</span> <span style="color:#ae81ff">366</span>;
</span></span><span style="display:flex;"><span>             year <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>         days <span style="color:#f92672">-=</span> <span style="color:#ae81ff">365</span>;
</span></span><span style="display:flex;"><span>         year <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><p>En un año normal este loop no tiene problemas, pero en el último día de año bisiesto, cuando hay 366 días por culpa del if (year &gt; 366) el loop deja de restar dias, y el ciclo no se detiene nunca.</p>
<p>Que los programadores tienen problemas con los años bisiestos queda de manifiesto al leer las respuestas a <a href="http://stackoverflow.com/questions/9/how-do-i-calculate-someones-age-in-c?page=1&tab=votes#tab-top">esta pregunta en StackOverflow</a>.</p>
<p>Pero resulta que este &ldquo;bug&rdquo; es más antiguo que los computadores.</p>
<p>Después de todo el año bisiesto es la corrección de un bug celestial :), nuestro planeta no gira alrededor del sol en una orbita con duración constante de 365 días, fue <a href="http://es.wikipedia.org/wiki/A%C3%B1o_bisiesto">en tiempos del papa Gregorio</a> que se corrigió este problema agregando un día cada cuatro años, excepto en las centurias, aunque se exceptúan las centurias divisibles por cuatrocientos. Esto es un poco complicado, y la fuente de otros tipos de bugs. He visto implementaciones en que se aplica la regla de calcular el bisiesto simplemente dividiendo por 4, ¡ya los quiero ver cuando consideren el 2100 como bisiesto!</p>
<p>Pero al parecer hay otro &ldquo;bug&rdquo; del bisiesto más antigua y fascinante. Una antigua ley inglesa establecía que &ldquo;el 29 de febrero no debía considerarse como un día real&rdquo;. Dado esto muchas tradiciones podían ser ignoradas, después de todo ese día no contaba. Así que los 29 de febrero <a href="http://blog.nyhistory.org/ladies-get-ready-its-a-leap-year/">estaba permitido que las damas le propusieran matrimonio a los caballeros</a>, si el hombre se negaba estaba obligado a comprarle un regalo en compensación. Esto generó algunas fiestas, y bailes que celebraban este &ldquo;poder especial&rdquo; con el que contaban las mujeres en estas fechas, que les permitía saltarse las rígidas convenciones sociales de la época.</p>
<p><img src="leapyear.jpg" alt=""></p>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 Eduardo Díaz</div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>592 words</span>
    <span>3 - 4 minutes read</span></div><h3>Attachments</h3>
    <ul><li><a href="http://localhost:1313/posts/2012/bisiesto/leapyear.jpg">leapyear.jpg</a></li></ul><h3>Related</h3>
    <ul><li><a href="/posts/2009/md5-las-vulnerabilidades-siguen-ahi/">MD5: las vulnerabilidades siguen ahí</a></li><li><a href="/posts/2007/mi-mayor-aporte-a-la-seguridad-informatica/">Mi mayor aporte a la seguridad informática</a></li><li><a href="/posts/2012/seguridad-y-oportunidad/">Seguridad y oportunidad</a></li><li><a href="/posts/2011/buggy-nights/">Buggy nights</a></li><li><a href="/posts/2010/deten-el-reloj-aplasta-al-bicho/">Detén el reloj, aplasta al &#34;bicho&#34;</a></li></ul></aside></div>
  </div>
</body>
</html>
