<!DOCTYPE html>
<html lang="es-cl" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cómo obtener el reporte del clima | La Naturaleza del Software</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/posts/2016/como-obtener-el-reporte-del-clima/">
  <meta property="og:site_name" content="La Naturaleza del Software">
  <meta property="og:title" content="Cómo obtener el reporte del clima">
  <meta property="og:description" content="Este artículo termina la descripción del segundo desafío en esta serie de nueve.
Recordemos que el desafío [consiste en construir una aplicación que obtenga el clima de distintas ciudades, usando la API de OpenWeatherMap.org. Cnstruimos un programa que recibe a través de la línea de comandos una lista de ciudades. Este programa ejecuta una consulta al sitio OpenWeatherMap.org para obtener el informe del tiempo para cada una de las ciudades. El resultado queda ordenado de forma descendente, desde la mayor a la menor temperatura. El programa despliega la siguiente información por cada ciudad: el nombre, la temperatura actual, la máxima y la mínima más las condiciones del clima. Finalmente el programa debe informa el tiempo ocupado para descargar la información. Si se pasa el parámetro -p el programa hace la consulta “en paralelo” para cada ciudad.">
  <meta property="og:locale" content="es_cl">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2016-06-21T08:25:11-03:00">
    <meta property="article:modified_time" content="2016-06-21T08:25:11-03:00">
    <meta property="article:tag" content="Desafíos">
    <meta property="article:tag" content="Lenguajes De Programación">
    <meta property="article:tag" content="Programación">
    <meta property="article:tag" content="Go">
    <meta property="article:tag" content="Rust">
    <meta property="article:tag" content="Erlang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Cómo obtener el reporte del clima">
  <meta name="twitter:description" content="Este artículo termina la descripción del segundo desafío en esta serie de nueve.
Recordemos que el desafío [consiste en construir una aplicación que obtenga el clima de distintas ciudades, usando la API de OpenWeatherMap.org. Cnstruimos un programa que recibe a través de la línea de comandos una lista de ciudades. Este programa ejecuta una consulta al sitio OpenWeatherMap.org para obtener el informe del tiempo para cada una de las ciudades. El resultado queda ordenado de forma descendente, desde la mayor a la menor temperatura. El programa despliega la siguiente información por cada ciudad: el nombre, la temperatura actual, la máxima y la mínima más las condiciones del clima. Finalmente el programa debe informa el tiempo ocupado para descargar la información. Si se pasa el parámetro -p el programa hace la consulta “en paralelo” para cada ciudad.">

    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/bundle.css">

      <script src="/js/bundle.js"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/" style="color: inherit;">La Naturaleza del Software</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>Cómo obtener el reporte del clima</h1><time class="dim" datetime="2016-06-21T08:25:11-03:00">June 21, 2016</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/tags/desaf%C3%ADos/">#desafíos</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/lenguajes-de-programaci%C3%B3n/">#lenguajes de programación</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/programaci%C3%B3n/">#programación</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/go/">#go</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/rust/">#rust</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/erlang/">#erlang</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/haskell/">#haskell</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/scala/">#scala</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/kotlin/">#kotlin</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/clojure/">#clojure</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/fsharp/">#fsharp</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/swift/">#swift</a>
      </div></ol></div>
  <section class="page-section"><p>Este artículo termina la descripción del segundo desafío en esta serie
de nueve.</p>
<p>Recordemos que el desafío [consiste en construir una aplicación que
obtenga el clima de distintas ciudades, usando la API de
<a href="//www.openweathermap.org/">OpenWeatherMap.org</a>. Cnstruimos un
programa que
recibe a través de la línea de comandos una lista de ciudades. Este
programa ejecuta una consulta al sitio OpenWeatherMap.org para obtener
el informe del tiempo para cada una de las ciudades. El resultado queda
ordenado de forma descendente, desde la mayor a la menor temperatura. El
programa despliega la siguiente información por cada ciudad: el nombre,
la temperatura actual, la  máxima y la mínima más las condiciones del
clima. Finalmente el programa debe informa el tiempo ocupado para
descargar la información. Si se pasa el parámetro -p el programa hace la
consulta &ldquo;en paralelo&rdquo; para cada
ciudad.</p>
<h2 id="la-api-de-openweathermaporg">La API de OpenWeatherMap.Org</h2>
<p>La documentación del la API se encuentra en la siguiente
URL: <a href="http://www.openweathermap.org/api%5D(//www.openweathermap.org/api">http://www.openweathermap.org/api](//www.openweathermap.org/api</a>.
Hay varias opciones, yo usé la que permite obtener el estado actual del
clima: <a href="http://www.openweathermap.org/current">http://www.openweathermap.org/current</a>.</p>
<p>Para ocupar esta API hay que inscribirse en el sitio y obtener una
clave (Key) para poder usarla. Como este es un dato privado, definimos
una variable de ambiente en el sistema operativo donde dejaremos el
valor de esta clave. Esta variable se llama WEATHER_API_KEY. La forma
de rescatar el valor de esta variable es bastante simple en cada
lenguaje:</p>
<p><strong>Go</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;os&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">api_key</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Getenv</span>(<span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span>)
</span></span></code></pre></div><p>[<strong>Clojure</strong>:]</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-clojure" data-lang="clojure"><span style="display:flex;"><span>    (<span style="color:#66d9ef">def </span>api-key (<span style="color:#a6e22e">System/getenv</span> <span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span>))
</span></span></code></pre></div><p><strong>Scala</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> api_key <span style="color:#66d9ef">=</span> sys<span style="color:#f92672">.</span>env<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p><strong>Rust</strong>:  </p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> api_key <span style="color:#f92672">=</span> env::var(<span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span>).expect(<span style="color:#e6db74">&#34;debe definir WEATHER_API_KEY&#34;</span>);
</span></span></code></pre></div><p>En este caso la función env::var() retorna un valor de tipo Result, que
es un tipo algebraico, la función puede contener el valor Ok(r) o
Err(E). El método expect() de la clase Result evalúa el resultado, si es
Ok(r) retorna r, de lo contrario detiene el programa llamando a la
función panic con el mensaje &ldquo;debe definir WEATHER_API_KEY.</p>
<p><strong>Swift</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> apiKey = NSProcessInfo.processInfo().environment[<span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span>]<span style="color:#f92672">!</span>
</span></span></code></pre></div><p>Notar que hay un símbolo ! al final de la expresión, esto porque en el
arreglo enviroment los elementos son de tipo String?, es decir, pueden
contener un String o null. Nosotros queremos que este valor no sea nulo,
y esto lo forzamos colocando el ! al final. Si la variable no está
definida el programa se detendrá con un error.</p>
<p><strong>F#</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> api_key <span style="color:#f92672">=</span> Environment.GetEnvironmentVariable<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p><strong>Erlang</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-erlang" data-lang="erlang"><span style="display:flex;"><span>    <span style="color:#f92672">-</span>define(API_KEY, os:<span style="color:#a6e22e">getenv</span>(<span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span>)).
</span></span></code></pre></div><p>En este caso es una macro que se define en el encabezado del programa.</p>
<p><strong>Haskell</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span>    <span style="color:#66d9ef">import</span> System.Environment
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">do</span>  api_key <span style="color:#f92672">&lt;-</span> getEnv <span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span>
</span></span></code></pre></div><p><strong>Kotlin</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> apiKey = <span style="color:#a6e22e">System</span>.getenv(<span style="color:#e6db74">&#34;WEATHER_API_KEY&#34;</span>)
</span></span></code></pre></div><p>Ahora un ejercicio, determina qué pasa cuando no se define la variable
de ambiente WEATHER_API_KEY y cómo reacciona cada implementación. </p>
<p>Recuerda que el código está disponible en mi repositorio e en
GitHub: <a href="//github.com/lnds/9d9l/tree/master/desafio2">https://github.com/lnds/9d9l/tree/master/desafio2</a>.</p>
<p>Para probar esto se debe obtener la API Key en el sitio
<a href="//openweathermap.org/api">OpenWeatherMap.Org</a>.</p>
<h2 id="descarga-de-una-url">Descarga de una URL</h2>
<p>La API puede retornar el resultado en formato XML o JSON. Elegí la
opción XML para explorar como procesar este formato en distintos
lenguajes. En otro desafío más adelante veremos como analizar
información en formato JSON. </p>
<p>Veamos como se ejecuta la API en cada uno de los lenguajes, primero nos
concentraremos en descargar el XML desde una URL, después veremos cono
analizar el XML.</p>
<p><strong>Go</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">url</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadAll</span>(<span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>)
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">weather</span>, <span style="color:#a6e22e">success</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ParseCurrentWeather</span>(<span style="color:#a6e22e">body</span>)
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">...</span>.
</span></span></code></pre></div><p>En Go el manejo de errores se hace mediante la siguiente convención,
junto con el resultado se retorna una variable que indica si hubo error.
En este caso, la función http.Get(url) retorna nil si todo funciona
bien. La variable resp contiene el estado de la consulta y el cuerpo con
la información.</p>
<p>Para obtener el XML hacemos: body, err := ioutil.ReadAll(resp.Body).</p>
<p>Esto deja en body todo el texto del XML, el que es procesado después
por la función ParseCurrentWeather.</p>
<p>En retrospectiva la forma en que implementé esto en Go no es la mejor,
¿puedes re escribir el código de modo que sea más adecuado a lo usual en
Go? Si te animas, puedes hacer un pull request.</p>
<p><strong>Clojure</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-clojure" data-lang="clojure"><span style="display:flex;"><span>    (<span style="color:#66d9ef">defn </span>parse-xml [source]
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">try</span> (<span style="color:#a6e22e">xml/parse</span> source)
</span></span><span style="display:flex;"><span>         (<span style="color:#a6e22e">catch</span> org.xml.sax.SAXParseException e {<span style="color:#e6db74">:tag</span> <span style="color:#e6db74">:error</span> <span style="color:#e6db74">:content</span> <span style="color:#e6db74">&#34;xml format&#34;</span>})
</span></span><span style="display:flex;"><span>         (<span style="color:#a6e22e">catch</span> java.io.IOException e {<span style="color:#e6db74">:tag</span> <span style="color:#e6db74">:io-error</span>})
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">catch</span> Exception e {<span style="color:#e6db74">:tag</span> <span style="color:#e6db74">:general-error</span> <span style="color:#e6db74">:content</span> e})))
</span></span></code></pre></div><p>Acá matamos dos pájaros de un tiro. La función xml/parse descarga un
texto xml desde una url. Notar que hay un try, puesto que Clojure usa
funciones de Java las que producen excepciones cuando hay fallos.</p>
<p><strong>Scala</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> response <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Try</span><span style="color:#f92672">(</span><span style="color:#a6e22e">Source</span><span style="color:#f92672">.</span>fromURL<span style="color:#f92672">(</span>url<span style="color:#f92672">))</span>
</span></span></code></pre></div><p>La clase Try es un tipo algebraico, que retorna Succes(xml) si no hay
problema al descargar el Xml desde la url. El otro valor será Failure(e)
donde e es la excepción que se produce.</p>
<p><strong>Rust</strong></p>
<p>Para Rust usamos un <em><strong>crate</strong></em> llamado Hyper:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span>    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> hyper;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> client <span style="color:#f92672">=</span> Client::new();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">match</span> client.get(<span style="color:#f92672">&amp;</span>url).header(Connection::close()).send() {
</span></span><span style="display:flex;"><span>       Err(_) <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">..</span>.,
</span></span><span style="display:flex;"><span>       Ok(<span style="color:#66d9ef">mut</span> req) <span style="color:#f92672">=&gt;</span> {                
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> body <span style="color:#f92672">=</span> String::new();
</span></span><span style="display:flex;"><span>         req.read_to_string(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> body).unwrap();
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">match</span> Document::parse(body.as_bytes()) {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">....</span>
</span></span></code></pre></div><p>Notar que manejamos los dos casos, la falla (Err) y el éxito (Ok) usando
la sentencia match.</p>
<p>Acá usamos un objeto de la clase Client para llamar a la API.</p>
<p><strong>Swift</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> myURL = NSURL(string: url) { ... }
</span></span></code></pre></div><p>Acá usamos una construcción de Swift, si NSURL falla retornará nil, si
eso pasa el cuerpo del if no se ejecutará.</p>
<p><strong>F#</strong></p>
<p>En el caso de F# usamos una biblioteca llamada FSharp.Data</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">open</span> FSharp.Data
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">open</span> FSharp.Data.HttpRequestHeaders
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> res <span style="color:#f92672">=</span> Http.RequestString<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;http://api.openweathermap.org/data/2.5/weather&#34;</span><span style="color:#f92672">,</span> 
</span></span><span style="display:flex;"><span>                            httpMethod <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;GET&#34;</span><span style="color:#f92672">,</span> query<span style="color:#f92672">=[</span><span style="color:#e6db74">&#34;q&#34;</span><span style="color:#f92672">,</span> city<span style="color:#f92672">;</span> <span style="color:#e6db74">&#34;mode&#34;</span><span style="color:#f92672">,</span> 
</span></span><span style="display:flex;"><span>                            <span style="color:#e6db74">&#34;xml&#34;</span><span style="color:#f92672">;</span> <span style="color:#e6db74">&#34;units&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;metric&#34;</span><span style="color:#f92672">;</span> <span style="color:#e6db74">&#34;lang&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;sp&#34;</span><span style="color:#f92672">;</span> <span style="color:#e6db74">&#34;appid&#34;</span><span style="color:#f92672">,</span> api_key<span style="color:#f92672">],</span>
</span></span><span style="display:flex;"><span>                            headers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span>Accept HttpContentTypes.Xml<span style="color:#f92672">])</span>
</span></span></code></pre></div><p><strong>Erlang</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-erlang" data-lang="erlang"><span style="display:flex;"><span>    llamar_api(Url, N) <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>      {Res, Response} <span style="color:#f92672">=</span> httpc:<span style="color:#a6e22e">request</span>(get, {Url,[]}, [{timeout,<span style="color:#ae81ff">1000</span>}], []),
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">case</span> Res <span style="color:#66d9ef">of</span>
</span></span><span style="display:flex;"><span>         ok <span style="color:#f92672">-&gt;</span> {{_,Code,_}, _, Body} <span style="color:#f92672">=</span> Response,
</span></span><span style="display:flex;"><span>                  <span style="color:#66d9ef">if</span> Code <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">400</span><span style="color:#f92672">-&gt;</span> {Body, <span style="color:#e6db74">&#34;&#34;</span>};
</span></span><span style="display:flex;"><span>                   Code <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">399</span> <span style="color:#f92672">-&gt;</span> {[], <span style="color:#e6db74">&#34;Error consultando API, revise api key&#34;</span>}
</span></span><span style="display:flex;"><span>               <span style="color:#66d9ef">end</span>;
</span></span><span style="display:flex;"><span>         error <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> N <span style="color:#f92672">=:=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">-&gt;</span> {[], <span style="color:#e6db74">&#34;Api no disponible&#34;</span>};
</span></span><span style="display:flex;"><span>            N <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">-&gt;</span> ...
</span></span><span style="display:flex;"><span>           <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">end</span>.
</span></span></code></pre></div><p>De manera similar a Go, la llamada a httpc:request devuelve el resultado
más la respuesta. Si la respuesta es correcta (Res = ok), analizamos
Response, el que descomponemos de este modo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-erlang" data-lang="erlang"><span style="display:flex;"><span>     {{_,Code,_}, _, Body} <span style="color:#f92672">=</span> Response
</span></span></code></pre></div><p>Code es el código que retorna el protocolo HTTP (si es un valor menor a
400 no hay errores). En ese caso Body contiene el texto con el XML.</p>
<p><strong>Haskell</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span>    <span style="color:#66d9ef">import</span> Network.HTTP
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    api_call api_key city <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>        simpleHTTP (getRequest url) <span style="color:#f92672">&gt;&gt;=</span> getResponseBody
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">where</span>
</span></span><span style="display:flex;"><span>            url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://api.openweathermap.org/data/2.5/weather?q=&#34;</span><span style="color:#f92672">++</span>city<span style="color:#f92672">++</span><span style="color:#e6db74">&#34;&amp;mode=xml&amp;units=metric&amp;lang=sp&amp;appid=&#34;</span><span style="color:#f92672">++</span>api_key
</span></span></code></pre></div><p>La llamada simpleHTTP (getRequest url) retorna una monada  de tipo  IO
(Result (Response ty)).  </p>
<p>La función getResponseBody es declarada como:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span>    getResponseBody <span style="color:#f92672">::</span> <span style="color:#66d9ef">Result</span> (<span style="color:#66d9ef">Response</span> ty) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">IO</span> ty 
</span></span></code></pre></div><p>como getResponseBody no acepta de tipo IO (Result (Response ty)) usamos
el operador &gt;&gt;= que basicamente saca de la monada IO el contenido y lo
pasa a otra función que retorna una monada IO.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span>    (<span style="color:#f92672">&gt;&gt;=</span>) <span style="color:#f92672">::</span> (<span style="color:#66d9ef">Monad</span> m) <span style="color:#f92672">=&gt;</span> m a <span style="color:#f92672">-&gt;</span> (a <span style="color:#f92672">-&gt;</span> m b) <span style="color:#f92672">-&gt;</span> m b  
</span></span></code></pre></div><p><strong>Kotlin</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">import</span> kotlin.io.*
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> req = URL(url)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> rsp = req.readText()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> parseApiResponse(city, rsp)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (e:Exception) {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">..</span>.
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Kotlin en realidad otra manera de usar Java, así que es bastante simple.
La diferencia es que URL en Java no tiene el método readText(), este
amplía esa clase con el método readText().</p>
<h2 id="analizando-xml">Analizando XML </h2>
<p>El análisis, o parsing de XML es lo más interesante de este ejercicio,
así que si resististe hasta este punto ahora verás algo que vale la
pena, porque muestra cómo cada lenguaje revela sus características
únicas en las bibliotecas que implementan el &ldquo;<em>parsing</em>&rdquo; de XML.</p>
<p>XML de la API</p>
<p>Para futuras referencias este es un ejemplo de un resultado al llamar a
la API:</p>
<pre><code>&lt;current&gt;
   &lt;city id=&quot;4930956&quot; name=&quot;Boston&quot;&gt;
      &lt;coord lon=&quot;-71.06&quot; lat=&quot;42.36&quot;/&gt;
      &lt;country&gt;US&lt;/country&gt;
      &lt;sun rise=&quot;2016-04-03T10:21:21&quot; set=&quot;2016-04-03T23:13:38&quot;/&gt;
   &lt;/city&gt;
   &lt;temperature value=&quot;1.24&quot; min=&quot;-2.0&quot; max=&quot;9.0&quot; unit=&quot;metric&quot;/&gt;
   &lt;humidity value=&quot;31&quot; unit=&quot;%&quot;/&gt;
   &lt;pressure value=&quot;1017&quot; unit=&quot;hPa&quot;/&gt;
   &lt;wind&gt;
     &lt;speed value=&quot;6.2&quot; name=&quot;Moderate breeze&quot;/&gt;
     &lt;gusts value=&quot;8.7&quot;/&gt;
     &lt;direction value=&quot;350&quot; code=&quot;&quot; name=&quot;&quot;/&gt;
   &lt;/wind&gt;
   &lt;clouds value=&quot;1&quot; name=&quot;clear sky&quot;/&gt;
   &lt;visibility/&gt;
   &lt;precipitation value=&quot;0.2&quot; mode=&quot;rain&quot; unit=&quot;1h&quot;/&gt;
   &lt;weather number=&quot;500&quot; value=&quot;lluvia ligera&quot; icon=&quot;10d&quot;/&gt;
   &lt;lastupdate value=&quot;2016-04-03T15:35:32&quot;/&gt;
&lt;/current&gt;
</code></pre>
<p><strong>Go</strong></p>
<p>En go usamos la biblioteca encoding/xml</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;encoding/xml&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">City</span> <span style="color:#66d9ef">struct</span> {  <span style="color:#a6e22e">Name</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`xml:&#34;name,attr&#34;`</span>    <span style="color:#a6e22e">Country</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`xml:&#34;country&#34;`</span>}<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Weather</span> <span style="color:#66d9ef">struct</span> { <span style="color:#a6e22e">Value</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`xml:&#34;value,attr&#34;`</span>}<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Temperature</span> <span style="color:#66d9ef">struct</span> {    <span style="color:#a6e22e">Value</span> <span style="color:#66d9ef">float32</span> <span style="color:#e6db74">`xml:&#34;value,attr&#34;`</span> <span style="color:#a6e22e">Min</span> <span style="color:#66d9ef">float32</span> <span style="color:#e6db74">`xml:&#34;min,attr&#34;`</span> <span style="color:#a6e22e">Max</span> <span style="color:#66d9ef">float32</span> <span style="color:#e6db74">`xml:&#34;max,attr&#34;`</span>}<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Current</span> <span style="color:#66d9ef">struct</span> {   <span style="color:#a6e22e">XMLName</span> <span style="color:#a6e22e">xml</span>.<span style="color:#a6e22e">Name</span> <span style="color:#e6db74">`xml:&#34;current&#34;`</span> <span style="color:#a6e22e">City</span> <span style="color:#a6e22e">City</span> <span style="color:#e6db74">`xml:&#34;city&#34;`</span>   <span style="color:#a6e22e">Temperature</span> <span style="color:#a6e22e">Temperature</span> <span style="color:#e6db74">`xml:&#34;temperature&#34;`</span>  <span style="color:#a6e22e">Weather</span> <span style="color:#a6e22e">Weather</span> <span style="color:#e6db74">`xml:&#34;weather&#34;`</span>}<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ParseCurrentWeather</span>(<span style="color:#a6e22e">content</span> []<span style="color:#66d9ef">byte</span>) (<span style="color:#a6e22e">Current</span>, <span style="color:#66d9ef">bool</span>) {  <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Current</span>{}   <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">xml</span>.<span style="color:#a6e22e">Unmarshal</span>(<span style="color:#a6e22e">content</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>)    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>, <span style="color:#66d9ef">false</span>   }    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>, <span style="color:#66d9ef">true</span>}
</span></span></code></pre></div><p>En este caso se definen 4 estructuras. Current contiene las otras 3
estructuras: City, Temperature, Weather. Estos se obtienen de los
elementos con el respectivo nombre. Por ejemplo, el fragmento:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">City</span> <span style="color:#a6e22e">City</span> <span style="color:#e6db74">`xml:&#34;city&#34;`</span>
</span></span></code></pre></div><p>Indica que la variable de instancia City se obtiene del elemento city
del xml.</p>
<p>Luego usamos la función xml.Unmarshal() para transformar el String con
el xml en un objeto de tipo Current. Con esto obtener los datos que
necesitamos para nuestro reporte es muy sencillo.</p>
<p><strong>Clojure</strong></p>
<p>La función xml/parse retorna una estructura. Para extraer cada elemento
del XML hacemos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-clojure" data-lang="clojure"><span style="display:flex;"><span>    (<span style="color:#66d9ef">defn </span>extract-tag [tag x]
</span></span><span style="display:flex;"><span>      (first (filter <span style="color:#f92672">#</span>(= tag (<span style="color:#e6db74">:tag</span> %)) (<span style="color:#e6db74">:content</span> x))))
</span></span></code></pre></div><p>Con esto definimos una función para obtener cada atributo que
necesitamos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-clojure" data-lang="clojure"><span style="display:flex;"><span>    (<span style="color:#66d9ef">defn </span>max-temp [x]
</span></span><span style="display:flex;"><span>     (<span style="color:#66d9ef">let </span>[t (<span style="color:#a6e22e">extract-tag</span> <span style="color:#e6db74">:temperature</span> x)]
</span></span><span style="display:flex;"><span>           (double (<span style="color:#a6e22e">read-string</span> (<span style="color:#e6db74">:max</span> (<span style="color:#e6db74">:attrs</span> t))))))
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">defn </span>min-temp [x]
</span></span><span style="display:flex;"><span>        (<span style="color:#66d9ef">let </span>[t (<span style="color:#a6e22e">extract-tag</span> <span style="color:#e6db74">:temperature</span> x)]
</span></span><span style="display:flex;"><span>           (double (<span style="color:#a6e22e">read-string</span> (<span style="color:#e6db74">:min</span> (<span style="color:#e6db74">:attrs</span> t))))))
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">defn </span>temp [x]
</span></span><span style="display:flex;"><span>        (<span style="color:#66d9ef">let </span>[t (<span style="color:#a6e22e">extract-tag</span> <span style="color:#e6db74">:temperature</span> x)]
</span></span><span style="display:flex;"><span>           (double (<span style="color:#a6e22e">read-string</span> (<span style="color:#e6db74">:value</span> (<span style="color:#e6db74">:attrs</span> t))))))
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">defn </span>city [x]
</span></span><span style="display:flex;"><span>      (<span style="color:#66d9ef">let </span>[c (<span style="color:#a6e22e">extract-tag</span> <span style="color:#e6db74">:city</span> x)]
</span></span><span style="display:flex;"><span>          (<span style="color:#e6db74">:name</span> (<span style="color:#e6db74">:attrs</span> c))))
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">defn </span>conditions [x]
</span></span><span style="display:flex;"><span>        (<span style="color:#66d9ef">let </span>[w (<span style="color:#a6e22e">extract-tag</span> <span style="color:#e6db74">:weather</span> x)]
</span></span><span style="display:flex;"><span>           (<span style="color:#e6db74">:value</span> (<span style="color:#e6db74">:attrs</span> w))))
</span></span></code></pre></div><p><strong>Scala</strong></p>
<p>En este caso usamos un DSL definido en scala.xml</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>    <span style="color:#66d9ef">import</span> scala.xml._
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> current <span style="color:#66d9ef">=</span> xml \\ <span style="color:#e6db74">&#34;current&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>current<span style="color:#f92672">.</span>isEmpty<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">Error</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;error parsing xml response&#34;</span><span style="color:#f92672">,</span> city<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">val</span> city <span style="color:#66d9ef">=</span> xml \\ <span style="color:#e6db74">&#34;city&#34;</span> \ <span style="color:#e6db74">&#34;@name&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">val</span> temp <span style="color:#66d9ef">=</span> xml \\ <span style="color:#e6db74">&#34;temperature&#34;</span> \ <span style="color:#e6db74">&#34;@value&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">val</span> min  <span style="color:#66d9ef">=</span> xml \\ <span style="color:#e6db74">&#34;temperature&#34;</span> \ <span style="color:#e6db74">&#34;@min&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">val</span> max  <span style="color:#66d9ef">=</span> xml \\ <span style="color:#e6db74">&#34;temperature&#34;</span> \ <span style="color:#e6db74">&#34;@max&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">val</span> weather <span style="color:#66d9ef">=</span> xml \\ <span style="color:#e6db74">&#34;weather&#34;</span> \ <span style="color:#e6db74">&#34;@value&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Esto es bastante simple comparado con los dos lenguajes anteriores.</p>
<p><strong>Rust</strong></p>
<p>Para este caso usamos un crate llamado treexml:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span>    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> treexml;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">use</span> treexml::Document;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">match</span> Document::parse(body.as_bytes()) {
</span></span><span style="display:flex;"><span>       Err(_) <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">..</span>.,
</span></span><span style="display:flex;"><span>       Ok(doc) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> root <span style="color:#f92672">=</span> doc.root.unwrap();
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> temp <span style="color:#f92672">=</span> root.find_child(<span style="color:#f92672">|</span>tag<span style="color:#f92672">|</span> tag.name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;temperature&#34;</span>).unwrap().clone();
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> weather <span style="color:#f92672">=</span> root.find_child(<span style="color:#f92672">|</span>tag<span style="color:#f92672">|</span> tag.name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;weather&#34;</span>).unwrap().clone();
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> min_temp: <span style="color:#66d9ef">f32</span><span style="color:#f92672">=</span> temp.attributes[<span style="color:#e6db74">&#34;min&#34;</span>].parse().unwrap();
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> max_temp: <span style="color:#66d9ef">f32</span><span style="color:#f92672">=</span> temp.attributes[<span style="color:#e6db74">&#34;max&#34;</span>].parse().unwrap();
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> cur_temp: <span style="color:#66d9ef">f32</span><span style="color:#f92672">=</span> temp.attributes[<span style="color:#e6db74">&#34;value&#34;</span>].parse().unwrap();
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">..</span>.
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Document::parse() es la función que convierte un stream de bytes en un
documento xml. A partir de ahí usamos el objeto retornado por esta
función para poder obtener los elementos que necesitamos.</p>
<p>Notar como transformamos Strings en números de punto flotante.</p>
<p>El método parse de la clase str infiere el tipo al que debe convertirse
a partir del lado izquierdo de la expresión, porque parse se declara de
este modo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">parse</span><span style="color:#f92672">&lt;</span>F<span style="color:#f92672">&gt;</span>(<span style="color:#f92672">&amp;</span>self) -&gt; Result<span style="color:#f92672">&lt;</span>F, F::Err<span style="color:#f92672">&gt;</span> 
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">where</span> F: <span style="color:#a6e22e">FromStr</span>
</span></span></code></pre></div><p>Es una función genérica. De este modo, si s es de tipo str entonces en
esta expresión:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span>    F v <span style="color:#f92672">=</span> s.parse().unwrap();
</span></span></code></pre></div><p>El compilador infiere que el resultado debe ser de tipo F, pero F debe
implementar el trait FromStr. </p>
<p>parse() retorna un valor de tipo Result. La función unwrap() que
pertenece a la enum Result, retorna el valor Ok(), si el valor es Err()
genera un panic, deteniendo el programa. </p>
<p><strong>Swift</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> xmlDoc = <span style="color:#66d9ef">try</span> NSXMLDocument(contentsOfURL: myURL, options:<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> root = xmlDoc.rootElement() {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> cityName = root.elementsForName(<span style="color:#e6db74">&#34;city&#34;</span>)[<span style="color:#ae81ff">0</span>].attributeForName(<span style="color:#e6db74">&#34;name&#34;</span>)<span style="color:#f92672">!</span>.stringValue!
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> temp = (root.elementsForName(<span style="color:#e6db74">&#34;temperature&#34;</span>)[<span style="color:#ae81ff">0</span>].attributeForName(<span style="color:#e6db74">&#34;value&#34;</span>)<span style="color:#f92672">!</span>.stringValue! <span style="color:#66d9ef">as</span> NSString).doubleValue
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> max  = (root.elementsForName(<span style="color:#e6db74">&#34;temperature&#34;</span>)[<span style="color:#ae81ff">0</span>].attributeForName(<span style="color:#e6db74">&#34;max&#34;</span>)<span style="color:#f92672">!</span>.stringValue! <span style="color:#66d9ef">as</span> NSString).doubleValue
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> min  = (root.elementsForName(<span style="color:#e6db74">&#34;temperature&#34;</span>)[<span style="color:#ae81ff">0</span>].attributeForName(<span style="color:#e6db74">&#34;min&#34;</span>)<span style="color:#f92672">!</span>.stringValue! <span style="color:#66d9ef">as</span> NSString).doubleValue
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> weatherConds = root.elementsForName(<span style="color:#e6db74">&#34;weather&#34;</span>)[<span style="color:#ae81ff">0</span>].attributeForName(<span style="color:#e6db74">&#34;value&#34;</span>)<span style="color:#f92672">!</span>.stringValue!
</span></span></code></pre></div><p>Todo esto está dentro de un bloque <strong>do .. catch</strong>, puesto que se puede
producir una excepción dado el try que está en la asignación a xmlDoc.</p>
<p>El resto del código es bastante fácil de deducir. Notar que volvemos a
usar la construcción <strong>if let.</strong></p>
<p><strong>F#</strong></p>
<p>Esta es, para mi, la solución más simple de implementar, primero
definimos un tipo XmlProvider pasándole un string con el ejemplo del XML
que queremos
analizar:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Result</span> <span style="color:#f92672">=</span> XmlProvider<span style="color:#f92672">&lt;</span><span style="color:#e6db74">&#34;&#34;&#34;&lt;current&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;city id=&#34;4930956&#34; name=&#34;Boston&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;coord lon=&#34;-71.06&#34; lat=&#34;42.36&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;country&gt;US&lt;/country&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;sun rise=&#34;2016-04-03T10:21:21&#34; set=&#34;2016-04-03T23:13:38&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;/city&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;temperature value=&#34;1.24&#34; min=&#34;-2.0&#34; max=&#34;9.0&#34; unit=&#34;metric&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;humidity value=&#34;31&#34; unit=&#34;%&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;pressure value=&#34;1017&#34; unit=&#34;hPa&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;wind&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;speed value=&#34;6.2&#34; name=&#34;Moderate breeze&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;gusts value=&#34;8.7&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;direction value=&#34;350&#34; code=&#34;&#34; name=&#34;&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;/wind&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;clouds value=&#34;1&#34; name=&#34;clear sky&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;visibility/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;precipitation value=&#34;0.2&#34; mode=&#34;rain&#34; unit=&#34;1h&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;weather number=&#34;500&#34; value=&#34;lluvia ligera&#34; icon=&#34;10d&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;lastupdate value=&#34;2016-04-03T15:35:32&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                                &lt;/current&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                            &#34;&#34;&#34;</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">///&#34;&#34;&#34;
</span></span></span></code></pre></div><p>Luego para obtener los datos hacemos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> xml <span style="color:#f92672">=</span> Result.Parse<span style="color:#f92672">(</span>res<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> name <span style="color:#f92672">=</span> xml<span style="color:#f92672">.</span>City<span style="color:#f92672">.</span>Name
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> temp <span style="color:#f92672">=</span> xml<span style="color:#f92672">.</span>Temperature<span style="color:#f92672">.</span>Value
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> max  <span style="color:#f92672">=</span> xml<span style="color:#f92672">.</span>Temperature<span style="color:#f92672">.</span>Max
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> min  <span style="color:#f92672">=</span> xml<span style="color:#f92672">.</span>Temperature<span style="color:#f92672">.</span>Min
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> cond <span style="color:#f92672">=</span> xml<span style="color:#f92672">.</span>Weather<span style="color:#f92672">.</span>Value
</span></span></code></pre></div><p>Esto es bastante &ldquo;mágico&rdquo;, gracias al buen diseño de la biblioteca
FSharp.Data.</p>
<p><strong>Erlang</strong></p>
<p>En este caso usamos las funciones de dos módulos, primer
xmerl_scan:string que analiza un string y la convierte en un Xml que
puede ser analizado usando xmerl_xpath:string. Que usa las convenciones
de XPath para recorrer el xml.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-erlang" data-lang="erlang"><span style="display:flex;"><span>    extraer_reporte(Xml, _, _) <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>       {Root,_} <span style="color:#f92672">=</span> xmerl_scan:<span style="color:#a6e22e">string</span>(Xml),
</span></span><span style="display:flex;"><span>      Ciudad <span style="color:#f92672">=</span> extraer_valor(xmerl_xpath:<span style="color:#a6e22e">string</span>(<span style="color:#e6db74">&#34;//city/@*&#34;</span>, Root), name),
</span></span><span style="display:flex;"><span>        TempAttrs <span style="color:#f92672">=</span> xmerl_xpath:<span style="color:#a6e22e">string</span>(<span style="color:#e6db74">&#34;//temperature/@*&#34;</span>, Root),
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">%% truco para el caso en que la temperatura es entera
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       {Temp,_} <span style="color:#f92672">=</span> string:<span style="color:#a6e22e">to_float</span>(extraer_valor(TempAttrs, value) <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34;.0&#34;</span>),
</span></span><span style="display:flex;"><span>        {Max,_} <span style="color:#f92672">=</span> string:<span style="color:#a6e22e">to_float</span>(extraer_valor(TempAttrs, max) <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34;.0&#34;</span>),
</span></span><span style="display:flex;"><span>       {Min,_} <span style="color:#f92672">=</span> string:<span style="color:#a6e22e">to_float</span>(extraer_valor(TempAttrs, min) <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34;.0&#34;</span>),
</span></span><span style="display:flex;"><span>       Cond <span style="color:#f92672">=</span> extraer_valor(xmerl_xpath:<span style="color:#a6e22e">string</span>(<span style="color:#e6db74">&#34;//weather/@*&#34;</span>, Root), value),
</span></span><span style="display:flex;"><span>      {ok,Ciudad,Temp,Max,Min,Cond}.
</span></span></code></pre></div><p>Como xmerl_xpath retorna una estructura más compleja de lo que
necesitamos, definí una función auxiliar que se llama extraer_valor:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-erlang" data-lang="erlang"><span style="display:flex;"><span>    extraer_valor([], _) <span style="color:#f92672">-&gt;</span> error;
</span></span><span style="display:flex;"><span>    extraer_valor([{xmlAttribute,A,_,_,_,_,_,_,Value,_}|T], Attr) <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> A <span style="color:#f92672">=:=</span> Attr <span style="color:#f92672">-&gt;</span> Value;
</span></span><span style="display:flex;"><span>         A <span style="color:#f92672">=/=</span> Attr <span style="color:#f92672">-&gt;</span> extraer_valor(T, Attr)
</span></span></code></pre></div><p>la función xmerl_xpath&gt;string retorna una lista de elementos, de los
cuales filtramos los que son de tipo xmlAttribute. </p>
<p><strong>Haskell</strong></p>
<p>Esta es la implementación más dificil de entender, mucho más que lo que
acabamos de ver en Erlang.</p>
<p>Este es el fragmento que extrae los elementos que necesitamos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span>     name val <span style="color:#f92672">=</span> (xmlRead <span style="color:#e6db74">&#34;city&#34;</span> <span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#f92672">$</span> val)
</span></span><span style="display:flex;"><span>     temp val <span style="color:#f92672">=</span> read (xmlRead <span style="color:#e6db74">&#34;temperature&#34;</span> <span style="color:#e6db74">&#34;value&#34;</span> <span style="color:#f92672">$</span> val) <span style="color:#f92672">::</span> <span style="color:#66d9ef">Float</span>
</span></span><span style="display:flex;"><span>     max val  <span style="color:#f92672">=</span> read (xmlRead <span style="color:#e6db74">&#34;temperature&#34;</span> <span style="color:#e6db74">&#34;max&#34;</span> <span style="color:#f92672">$</span> val) <span style="color:#f92672">::</span> <span style="color:#66d9ef">Float</span>
</span></span><span style="display:flex;"><span>     min val  <span style="color:#f92672">=</span> read (xmlRead <span style="color:#e6db74">&#34;temperature&#34;</span> <span style="color:#e6db74">&#34;min&#34;</span> <span style="color:#f92672">$</span> val) <span style="color:#f92672">::</span> <span style="color:#66d9ef">Float</span>
</span></span><span style="display:flex;"><span>     weather val <span style="color:#f92672">=</span> (xmlRead <span style="color:#e6db74">&#34;weather&#34;</span> <span style="color:#e6db74">&#34;value&#34;</span> <span style="color:#f92672">$</span> val)
</span></span></code></pre></div><p>Hacen uso de la función xmlRead que se define así:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span>    <span style="color:#66d9ef">import</span> Text.XML.Light
</span></span><span style="display:flex;"><span>    xmlRead elem attr <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>      head <span style="color:#f92672">.</span> concatMap (map (fromJust<span style="color:#f92672">.</span>findAttr (unqual attr)) 
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">.</span> filterElementsName (<span style="color:#f92672">==</span> unqual elem)) <span style="color:#f92672">.</span> onlyElems <span style="color:#f92672">.</span> parseXML
</span></span></code></pre></div><p>Esta es una función que retorna otra función (usando currying) cuyos dos
primeros argumentos son el nombre del elemento que estamos buscano y el
atributo dentro de ese elemento. El tercer argumento será el xml.</p>
<p>Por eso cuando hacemos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span>    xmlRead <span style="color:#e6db74">&#34;city&#34;</span> <span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#f92672">$</span> val
</span></span></code></pre></div><p>Lo que hacemos es aplicar la función xmlRead con argumentos &ldquo;city&rdquo; y
&ldquo;name&rdquo; al xml val.</p>
<p>xmlRead es una composición, notar el uso del operador punto (.) para
armar una función compuesta. Esto hay que leerlo de derecha a izquierda.</p>
<p>parseXML analiza el string y devuelve una estructura de datos con la
descripción del xml. De esto solo nos interesan los elementos, lo que
hacemos con la llamada a la función onlyElems. </p>
<p>De estos elementos filtramos todos los elementos cuyo nonbre sea elem
usando la función filterElementsName. </p>
<p>concatMap (map (fromJust.findAttr (unqual attr)) buscará en profundidad
dentro de estos elementos los atributos que tengan el nombre que nos
interesa.</p>
<p>Finalmente seleccionamos el primero de estos elementos usando head.</p>
<p>(En nuestro caso esta lista siempre tiene sólo un elemento, pero debemos
usar head de todas maneras para extraer sólo ese valor).</p>
<p>Yo sugiero probar este código parte por parte usando el REPL de haskell
para entenderlo. Pueden hacer cabal repl y probar.</p>
<p><strong>Kotlin</strong></p>
<p>Comparado con el resto de los lenguajes, la manera de analizar el XML en
Kotlin es aburrida, y de bajo nivel, porque simplemente usamos la API de
Java 1.8:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> factory = <span style="color:#a6e22e">DocumentBuilderFactory</span>.newInstance()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> builder = factory.newDocumentBuilder()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> xmlStrBuilder = StringBuilder()
</span></span><span style="display:flex;"><span>    xmlStrBuilder.append(response)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> str = xmlStrBuilder.toString()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> bytes = str.toByteArray(<span style="color:#a6e22e">Charset</span>.forName(<span style="color:#e6db74">&#34;UTF-8&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> input = ByteArrayInputStream(bytes)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> doc = builder.parse(input)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> root = doc.documentElement
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> cityName = root.getElementsByTagName(<span style="color:#e6db74">&#34;city&#34;</span>).item(<span style="color:#ae81ff">0</span>).attributes.getNamedItem(<span style="color:#e6db74">&#34;name&#34;</span>).textContent
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> temp = root.getElementsByTagName(<span style="color:#e6db74">&#34;temperature&#34;</span>).item(<span style="color:#ae81ff">0</span>).attributes.getNamedItem(<span style="color:#e6db74">&#34;value&#34;</span>).textContent
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> min = root.getElementsByTagName(<span style="color:#e6db74">&#34;temperature&#34;</span>).item(<span style="color:#ae81ff">0</span>).attributes.getNamedItem(<span style="color:#e6db74">&#34;min&#34;</span>).textContent
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> max = root.getElementsByTagName(<span style="color:#e6db74">&#34;temperature&#34;</span>).item(<span style="color:#ae81ff">0</span>).attributes.getNamedItem(<span style="color:#e6db74">&#34;max&#34;</span>).textContent
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> conditions = root.getElementsByTagName(<span style="color:#e6db74">&#34;weather&#34;</span>).item(<span style="color:#ae81ff">0</span>).attributes.getNamedItem(<span style="color:#e6db74">&#34;value&#34;</span>).textContent
</span></span></code></pre></div><h2 id="conclusiones">Conclusiones</h2>
<p>Para terminar, estos son los resultados en términos de líneas de código
para cada lenguaje, ordenados de menos a más:</p>
<pre><code>| F#      |  77 |
|---------|-----|
| Haskell |  87 |
| Clojure |  87 |
| Erlang  |  90 |
| Swift   |  93 |
| Scala   | 101 |
| Rust    | 120 |
| Go      | 127 |
| Kotlin  | 139 |
</code></pre>
<p>Claramente hay abstracciones mejores que otras y estas no dependen
directamente del lenguaje, sino de su entorno, sus bibliotecas y en
algunos casos la comunidad. Los lenguajes basados en JVM heredan también
muchas funcionalidades empaquetadas. Estoy seguro que la solución en
Kotlin desde cero habría sido mucho más
larga.</p>
<p>No hay que engañarse por lo breve de la solución de Haskell, es cierto
que es tan breve como la de F#, pero es mucho más compleja de
entender. </p>
<p>Si Jorge Luis Borges hubiera sido programador habría programado en
Haskell, porque al igual que los cuentos del escritor argentino, en
Haskell podemos escribir muy pocas lineas, pero con una enorme densidad
de conceptos. Hay cuentos de Borges de muy pocas páginas pero que
presentan un desafío intelectual mayor, lo mismo pasa con
Haskell.]{style=&ldquo;letter-spacing: 0.01rem; line-height: 1.42857;&rdquo;}</p>
<p>El caso de F# es interesante y en este caso la simpleza de la solución
está a la par de las lineas de código. El problema es que la manera de
definir el parsing de XML requiere un ejemplo concreto del XML, esto
obliga a diseñar un buen ejemplo para cubrir muchos casos, algo que
puede ser difícil de lograr. Creo que los autores de FSharp.Data han
realizado un maravilloso trabajo, que se va a destacar en los próximos
desafíos.</p>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 Eduardo Díaz</div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>2858 words</span>
    <span>21 - 26 minutes read</span></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#la-api-de-openweathermaporg">La API de OpenWeatherMap.Org</a></li>
    <li><a href="#descarga-de-una-url">Descarga de una URL</a></li>
    <li><a href="#analizando-xml">Analizando XML </a></li>
    <li><a href="#conclusiones">Conclusiones</a></li>
  </ul>
</nav><h3>Related</h3>
    <ul><li><a href="/posts/2016/chubascos-de-ligera-intensidad/">Chubascos de ligera intensidad</a></li><li><a href="/posts/2016/reporte-del-clima/">Reporte del Clima</a></li><li><a href="/posts/2016/esos-raros-lenguajes-nuevos/">Esos Raros Lenguajes Nuevos</a></li><li><a href="/posts/2016/mas-alla-del-hola-mundo/">Más allá del Hola Mundo</a></li><li><a href="/posts/2011/cuidate-del-estilista/">Cuidate del estilista</a></li></ul></aside></div>
  </div>
</body>
</html>
