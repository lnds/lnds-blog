<!DOCTYPE html>
<html lang="es-cl" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bugs Vergonzosos | La Naturaleza del Software</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/posts/2016/bugs-vergonzosos/">
  <meta property="og:site_name" content="La Naturaleza del Software">
  <meta property="og:title" content="Bugs Vergonzosos">
  <meta property="og:description" content="La palabra Bug, literalmente “bicho”, usada para denotar un error informático, tiene su origen en el hallazgo de una polilla por parte de los operadores del Mark II, el hecho fue reportado por la famosa Grace Hopper. La fotografía de abajo corresponde a una página de la bitácora de operaciones del Harvard Mark II. La nota de Hopper hace mención al “primer caso real de bicho encontrado”, denotando que el término bug es mucho más antiguo, el mismo Tomas Alva Edison usa la palabra bug para hablar de fallas mecánicas en sus inventos.">
  <meta property="og:locale" content="es_cl">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2016-03-05T08:25:11-03:00">
    <meta property="article:modified_time" content="2016-03-05T08:25:11-03:00">
    <meta property="article:tag" content="Errores">
    <meta property="article:tag" content="Calidad">
    <meta property="article:tag" content="Bugs">
    <meta property="og:image" content="http://localhost:1313/posts/2016/bugs-vergonzosos/featured.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/posts/2016/bugs-vergonzosos/featured.png">
  <meta name="twitter:title" content="Bugs Vergonzosos">
  <meta name="twitter:description" content="La palabra Bug, literalmente “bicho”, usada para denotar un error informático, tiene su origen en el hallazgo de una polilla por parte de los operadores del Mark II, el hecho fue reportado por la famosa Grace Hopper. La fotografía de abajo corresponde a una página de la bitácora de operaciones del Harvard Mark II. La nota de Hopper hace mención al “primer caso real de bicho encontrado”, denotando que el término bug es mucho más antiguo, el mismo Tomas Alva Edison usa la palabra bug para hablar de fallas mecánicas en sus inventos.">

    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/bundle.css">

      <script src="/js/bundle.js"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/" style="color: inherit;">La Naturaleza del Software</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>Bugs Vergonzosos</h1><time class="dim" datetime="2016-03-05T08:25:11-03:00">March 5, 2016</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/tag/errores/">#errores</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/calidad/">#calidad</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/bugs/">#bugs</a>
      </div></ol></div>
  <section class="page-section"><p>La palabra Bug, literalmente &ldquo;bicho&rdquo;, usada para denotar un error
informático, tiene su origen en el hallazgo de una polilla por parte de
los operadores del Mark II, el hecho fue reportado por la famosa
<a href="//es.wikipedia.org/wiki/Grace_Murray_Hopper">Grace Hopper</a>. </p>
<p>La fotografía de abajo corresponde a una página de la bitácora de
operaciones del Harvard Mark II. La nota de Hopper hace mención al
&ldquo;primer caso real de bicho encontrado&rdquo;, denotando que el término bug
es mucho más antiguo, el mismo Tomas Alva Edison usa la palabra bug para
hablar de fallas mecánicas en sus
inventos.</p>
<figure><img src="//d2dspjyoh5c79p.cloudfront.net/8c9220fc-e2d0-11e5-a13c-3371c0364c63-aa9f18b7"
    alt="El primer bug"><figcaption>
      <p>El primer bug</p>
    </figcaption>
</figure>

<p>En programación nos encontramos con bugs todo el tiempo. Hay toda clase
de bugs, bugs que ocurren porque nos encontramos con una condición no
prevista, bugs por
un error en la implementación del algoritmo, bugs originados por una
mala definición, o por asumir condiciones que no se dan,
etc.</p>
<p>Los bugs vergonzosos son aquellos debidos a la mala programación. </p>
<p>En 2014, para el 11º Simposio USENIX de Diseño e Implementación de
Sistemas Operativos, un grupo de investigadores de la Universidad de
Toronto presentaron
<a href="//www.eecg.toronto.edu/~yuan/papers/failure_analysis_osdi14.pdf">el resultado de su investigación</a>
sobre sistemas distribuidos en el mundo real. </p>
<p>El Paper de este estudio se llama: &ldquo;Simple Testing Can Prevent Most
Critical Failures&rdquo; y lo pueden encontrar
<a href="//www.eecg.toronto.edu/~yuan/papers/failure_analysis_osdi14.pdf">acá</a>,
por si quieren profundizar en el tema.</p>
<p>Los investigadores eligieron los siguientes sistemas: </p>
<blockquote>
<p>- <strong>Cassandra</strong>, la base de datos NoSQL desarrollada originalmente
por Facebook, mantenida por la Fundación Apache, y que es usada entre
otros por Apple (con más de 100.000 nodos) y NetFlix.</p>
<p>- <strong>HBase</strong>, otra importante base de datos NoSQL, usada por Spotify y
Facebook.</p>
<p>- <strong>Hadoop</strong>, en particular las componentes <strong>MapReduce</strong> y <strong>HDFS</strong>.</p>
<p>-<strong>Redis</strong>, el famoso ¨servidor de estructuras de datos&quot;, usado en
multitud de servicios, como GitHub, Twitter, Pinterest o
StackOverflow.</p></blockquote>
<p>De los cinco sistemas analizados, cuatro están escrito en Java y uno en
C. Estamos hablando de un estudio del software que es parte de la
infraestructura crítica de importantes y masivos servicios de
internet.</p>
<p>Estos sistemas son &ldquo;tolerantes a fallas&rdquo;, es decir, están diseñados
para ser resilientes a errores en el entorno, sobrecarga de trabajo,
etc. Durante su trabajo, los investigadores lograron provocar un total
de 17,216 fallas al sistema, pero 48 fueron catastróficas, es decir,
lograron dejar inoperante el sistema. (En un caso la recuperación
implicó establecer sesiones SSH manuales a más de 4.000 nodos para
detener los procesos).</p>
<p>Lo interesante del estudio es que descubrieron que muchos de los errores
catastróficos eran del estilo:s</p>
<pre><code>try {
    ....
} catch (Throwable t) {
   System.exit(-1);
}
</code></pre>
<p>O peor:</p>
<pre><code>try {
    ....
} catch (Throwable t) {
   // TODO
   LOG(&quot;se produjo un error...&quot;);
}
</code></pre>
<p>El 92% de los errores corresponden a un manejo incorrecto de errores,
pero que eran conocidos por los programadores, por estar explícitamente
señalados en el código.</p>
<p>El 35% son errores triviales: 25% causados por ignorar el error, 8% por
abortar durante la excepción, 2% simplemente tienen un comentario TODO
(<em>por hacer</em>, o <em>pendiente</em>, en inglés) en el código.</p>
<p>El 57% de los errores son específicos del sistema, el 23% son
detectables fácilmente detectables y el 34% son complejos. La figura de
abajo, sacada del paper, resume la distribución de los errores
catastróficos:</p>
<figure><img src="//d2dspjyoh5c79p.cloudfront.net/d6e105af-e2d9-11e5-a13c-3371c0364c63-aa9f18b7"
    alt="División de errores"><figcaption>
      <p>División de errores</p>
    </figcaption>
</figure>

<p>Quiero que reflexionemos sobre esto, estamos hablando de errores
triviales, que son manejados de manera descuidada. </p>
<p>También estamos hablando de proyectos Opensource, y con esto tenemos
otro desmentido de esa falacia, convertida en mantra por algunos
fanáticos, llamada la Ley de Linus:</p>
<blockquote>
<p>«Dado un número suficientemente elevado de ojos, todos los errores se
vuelven obvios.»</p></blockquote>
<p>(La ley no fue formulada por Linus Torvalds, sino que por Eric Raymond
en su ensayo &ldquo;La Catedral y el Bazar&rdquo;).</p>
<p>De seguro en su trabajo y en el código propio han visto cosas de este
estilo. Nuestros programas están llenos de cosas similares, no tiraré la
primera piedra, porque me confieso culpable, y muchas veces he dejado
&ldquo;esto para después&rdquo; y siempre me ha explotado en la cara. Traten de
evitarlo. </p>
<p>Pero lo que no tiene perdón, ni excusas a &ldquo;estas alturas del partido&rdquo;
es el Bug, o mejor dicho, la &ldquo;Vergüenza del Bisiesto&rdquo;.</p>
<p>El 29 de febrero de este año, más de 1.200 maletas no llegaron a sus
aviones por un error de año bisiesto en el sistema de control de la
transportadora de equipajes del Aeropuerto de Düsseldorf.</p>
<p>Hay una lista de los errores de este año en esta
dirección: <a href="//codeofmatt.com/2016/02/29/list-of-2016-leap-day-bugs/">http://codeofmatt.com/2016/02/29/list-of-2016-leap-day-bugs/</a></p>
<p>Hay varios &ldquo;horrores&rdquo; documentados asociados a este bug:</p>
<p>- en 2012 el servicio de Cloud Computing Azure de Microsoft <a href="//azure.microsoft.com/en-us/blog/summary-of-windows-azure-service-disruption-on-feb-29th-2012/">estuvo con
problemas por 12 horas debido a un error al validar la expiración de un
certificado el 29 de febrero de ese
año</a>.</p>
<p>- en 2010 <a href="//www.nbcnews.com/id/35646131/ns/technology_and_science-games/t/leap-year-glitch-fixed-sony-playstation">la Play Station Network de Sony
falló</a>
porque el sistema identificó incorrectamente el año 2010 como bisiesto
(!).</p>
<p>- en diciembre de 2008 <a href="//www.theguardian.com/technology/blog/2009/jan/01/zune-firmware-mistake">los dispositivos Zune de
Microsoft</a> (que
pretendían competir con los iPod) se congelaron.</p>
<p>El Bug del año bisiesto se presenta de 2 formas, la más conocida se da
en febrero, pero el 31 de diciembre también ocurren problemas. Muchos
programa asumen que el último día del año corresponde al día 365, cosa
que no se da en un año bisiesto, que tiene 366 días.</p>
<p>[El error del Zune tiene que ver con este otro aspecto, este es el
infame código que congeló estos
dispositivos:]{style=&ldquo;letter-spacing: 0.01rem; line-height: 1.5;&rdquo;}</p>
<pre><code>01 year = ORIGINYEAR; /* = 1980 */
02 while (days &gt; 365) {
03  if (IsLeapYear(year)) {
04    if (days &gt; 366){
05      days -= 366;
06      year += 1;
07    }
08  }
09  else {
10    days -= 365;
11    year += 1;
12   }
13 }
</code></pre>
<p>El 31 de diciembre de 2008 la variable days tenía el valor 366 y como
2008 es bisiesto, el programa entraba dentro de la condición de if de la
linea 03, pero acá no hay ninguna manera de alterar el valor de days,
que queda con el valor 366 para siempre, convirtiendo todo este código
en un loop infinito.</p>
<p>Pero este problema se da también en nuestro país, este año he escuchado
de 3 casos. De seguro ustedes conocen varios y sería interesante oir de
algunos en los comentarios.</p>
<p>¿Por qué pasa esto?</p>
<p>Dice en la Biblia:</p>
<blockquote>
<p>&ldquo;Enséñanos a contar bien nuestros días, para que nuestra mente
alcance sabiduría.&rdquo; &ndash; Salmos 90:12</p></blockquote>
<p>Aunque no comparto la fé del viejo Rey Salomón, sí estoy de acuerdo en
que es necesario que los programas aprendan a contar bien los días. </p>
<p>Este salmo aparece citado como epígrafe en uno de los artículos más
importantes que he leído y que creo que debería leer todo aquel que
quiera llamarse a si mismo programador.
Se trata de &ldquo;CalendricalCalculations&rdquo; un paper publicado en
Software Practice and Experience en septiembre de 1990.</p>
<p>Es un paper hermoso, con código expresado en Lisp, lo que le da más
estilo aún 😜. Posteriormente los autores expandieron el artículo en
forma de libro (<a href="//amzn.to/1VYgCUc">en Amazon</a>). En este artículo
aparece todo lo que se debe saber sobre el manejo de fechas.</p>
<p>En Calendrical Calculation vemos esta pieza de código, para determinar
el último día de un mes:</p>
<pre><code>(defun last-day-of-gegorian-month (month year)
   (if (and (= month 2)
                (= (month year 4) 0)
                (not (member (mod year 400) (list 100 200 300))))
   29
   (nth (1- month) (list 31 28 31 30 31 30 31 31 30 31 30 31))))
</code></pre>
<p>Como no quiero provocarles urticaria, les voy a mostrar el código en C:</p>
<pre><code>int last_day_of_gregorian_month(int year, int month) {
     int leap = (year%4 == 0 &amp;&amp; year%100 != 0) || year%400 == 0;
     int days[] = {31,28+leap,31,30,31,30,31,31,30,31,30,31};
     return days[month-1];
}
</code></pre>
<p>Un año es bisiesto si es divisible por 4, pero se deben excluir las
centurias (divisibles por 100), con excepción de las centurias divisible
por 400. Es por esto que el año 1.900 no fue bisiesto, pero sí el 2.000.</p>
<p>De seguro el lenguaje que usas tiene funciones para poder calcular esto,
por ejemplo en Python:</p>
<pre><code>import calendar
calendar.monthrange(year, month)[1]
</code></pre>
<p>Lo importante es que verifiquen que las bibliotecas del lenguaje tengan
esto bien implementado.</p>
<p>Así que esperemos que no tengamos que volver sobre este tema en cuatro
años más, porque significa que somos incapaces de aprender nada. </p>
<p>Sólo piensen en el tiempo perdido, estrés, y dinero que sufrieron los
programadores, ingenieros de sistemas en cada uno de los casos que les
mencioné antes. </p>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 Eduardo Díaz</div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>1387 words</span>
    <span>8 - 11 minutes read</span></div><h3>Attachments</h3>
    <ul><li><a href="http://localhost:1313/posts/2016/bugs-vergonzosos/featured.png">featured.png</a></li></ul><h3>Related</h3>
    <ul><li><a href="/posts/2015/historia-de-un-bug/">Historia de un Bug</a></li><li><a href="/posts/2014/dolores-de-cabeza/">Dolores de Cabeza</a></li><li><a href="/posts/2012/bisiesto/">¡Bisiesto!</a></li><li><a href="/posts/2011/buggy-nights/">Buggy nights</a></li><li><a href="/posts/2010/control-de-calidad/">Control de Calidad</a></li></ul></aside></div>
  </div>
</body>
</html>
