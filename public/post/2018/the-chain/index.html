<!DOCTYPE html>
<html lang="es-cl" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The Chain | La Naturaleza del Software</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/post/2018/the-chain/">
  <meta property="og:site_name" content="La Naturaleza del Software">
  <meta property="og:title" content="The Chain">
  <meta property="og:description" content="“Chain, keep us together
Running in the shadows
Chain, keep us together
Running in the shadows
The Chain tiene la peculiaridad de ser la única canción de Fleetwood Mac firmada por todos sus integrantes activos durante la grabación de un álbum, y la razón para esto es muy curiosa.
En 1977 la banda presentaba su formación más conocida y exitosa. La alineación era la siguiente: Mick Fleetwood en batería, John McVie en bajo, Christine McVie en voces y teclados, la gran Stevie Nicks, en voces, por supuesto, y Lindsey Buckingham en guitarras y voz.">
  <meta property="og:locale" content="es_cl">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2018-01-06T08:25:11-03:00">
    <meta property="article:modified_time" content="2018-01-06T08:25:11-03:00">
    <meta property="article:tag" content="Blockchain">
    <meta property="article:tag" content="Arquitectura">
    <meta property="article:tag" content="OOP">
    <meta property="article:tag" content="Patrones">
    <meta property="article:tag" content="Encadenamiento">
    <meta property="article:tag" content="Inmutabilidad">
    <meta property="og:image" content="http://localhost:1313/post/2018/the-chain/featured.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/post/2018/the-chain/featured.png">
  <meta name="twitter:title" content="The Chain">
  <meta name="twitter:description" content="“Chain, keep us together
Running in the shadows
Chain, keep us together
Running in the shadows
The Chain tiene la peculiaridad de ser la única canción de Fleetwood Mac firmada por todos sus integrantes activos durante la grabación de un álbum, y la razón para esto es muy curiosa.
En 1977 la banda presentaba su formación más conocida y exitosa. La alineación era la siguiente: Mick Fleetwood en batería, John McVie en bajo, Christine McVie en voces y teclados, la gran Stevie Nicks, en voces, por supuesto, y Lindsey Buckingham en guitarras y voz.">

    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/bundle.css">

      <script src="/js/bundle.js"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/" style="color: inherit;">La Naturaleza del Software</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a
      >Posts</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a
      >Posts</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/post/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>The Chain</h1><time class="dim" datetime="2018-01-06T08:25:11-03:00">January 6, 2018</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/tags/blockchain/">#blockchain</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/arquitectura/">#arquitectura</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/oop/">#OOP</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/patrones/">#patrones</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/encadenamiento/">#encadenamiento</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/inmutabilidad/">#inmutabilidad</a>
      </div></ol></div>
  <section class="page-section"><blockquote>
<p>&ldquo;Chain, keep us together<br>
Running in the shadows<br>
Chain, keep us together<br>
Running in the shadows</p></blockquote>
<p><a href="https://en.wikipedia.org/wiki/The_Chain">The Chain</a> tiene la
peculiaridad de ser la única canción de Fleetwood Mac firmada por todos
sus integrantes activos durante la grabación de un álbum, y la razón
para esto es muy curiosa.</p>
<p>En 1977 la banda presentaba su formación más conocida y exitosa. La
alineación era la siguiente: <a href="https://en.wikipedia.org/wiki/Mick_Fleetwood">Mick Fleetwood</a> en batería,
<a href="https://en.wikipedia.org/wiki/John_McVie">John McVie</a> en bajo,
<a href="https://en.wikipedia.org/wiki/Christine_McVie">Christine McVie</a> en
voces y teclados, la gran <a href="https://en.wikipedia.org/wiki/Stevie_Nicks">Stevie Nicks</a>, en voces, por
supuesto, y <a href="https://en.wikipedia.org/wiki/Lindsey_Buckingham">Lindsey Buckingham</a> en
guitarras y voz.</p>
<figure><img src="https://d2dspjyoh5c79p.cloudfront.net/856cf561-f2f1-11e7-a030-2b5831f8ecb5-aa9f18b7"
    alt="FletwoodMac en 1977"><figcaption>
      <p>FletwoodMac en 1977</p>
    </figcaption>
</figure>

<p>Para grabar su álbum número once la banda se dirigió a California, a
trabajar en el famoso estudio <a href="https://en.wikipedia.org/wiki/Record_Plant">Record Plant</a>, en Sausalito.</p>
<p>Esa época era uno de los momentos más duros dentro del grupo. Stevie
Nicks siempre ha dicho que los mejores trabajos de Fleetwood Mac
surgieron cuando la banda estaba en su peor forma.</p>
<p><img src="https://d2dspjyoh5c79p.cloudfront.net/23469aa8-f312-11e7-a030-2b5831f8ecb5-aa9f18b7" alt=""></p>
<p>The Chain surge de la <strong>concatenación</strong> de un montón de material
rechazado. La sección final de la canción, que empieza con una
progresión en bajo, fue creada por Mick Fleetwood y John McVie que la
grabaron por separado. Por otro lado Stevie Nick había escrito la letra
y encontró que  podría calzar con esa melodía, así que trabajó con
Christine McVie en armar la primera parte de la canción. Para completar
el tema, Buckingham recicló la intro de una composición que había
desarollado con Nick como  duo de 1973. El puente lo extrajeron los
ingenieros de sonido, Ken Caillat y Richard Dashu, de otra grabación
descartada, removieron el piano que le había puesto McVie y cortaron con
hojas de afeitar las cintas para después pegarlas y darle la forma final
a la canción.</p>
<p>Esa es la razón por la que The Chain aparece firmada por todos los
integrantes del grupo.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<h2 id="cadenas">Cadenas</h2>
<blockquote>
<p>&ldquo;Listen to the wind blow<br>
Watch the sun rise<br>
Run in the shadows<br>
Damn your love, damn your lies&rdquo;</p></blockquote>
<p>Una cadena es un conjunto de eslabones, o anillos, enlazados entre sí.
Es una herramienta útil, para tirar, sujetar, o incluso transmitir
movimiento a las máquinas. También es un símbolo, de múltiples
significados, cómo opresión, unidad, o incluso opulencia.</p>
<p>En física y matemáticas, la catenaria es la forma que toma una cadena al
colgar de sus dos extremos. La forma precisa de la ecuación que describe
a esta forma geométrica fue obtenida como respuesta a un desafío,
planteado por Jakob Bernoulli, que convocó a los mejores matemáticos del
siglo diecisiete. El resultado fue obtenido a través del <em><strong>trabajo
colectivo</strong></em> de Gottfried Leibniz, Christiaan Huygens y Johann
Bernoulli.</p>
<p>La forma de la catenaria permitió al arquitecto catalán Antoni Gaudí
crear estructuras que distribuyen mejor la tensión a la que están
sometidas.</p>
<figure><img src="https://d2dspjyoh5c79p.cloudfront.net/61f3e582-f2f6-11e7-a030-2b5831f8ecb5-aa9f18b7"
    alt="Catenarias en La Pedrera de Gaudí"><figcaption>
      <p>Catenarias en La Pedrera de Gaudí</p>
    </figcaption>
</figure>

<p>En computación las cadenas aparece en muchas áreas y contextos, por
supuesto, y de eso vamos a hablar un poco.</p>
<h2 id="encadenamiento-inmutable">Encadenamiento Inmutable</h2>
<blockquote>
<p>&ldquo;And if you don&rsquo;t love me now<br>
You will never love me again<br>
I can still hear you saying<br>
We would never break the chain&rdquo;</p></blockquote>
<p>El &ldquo;method chaining&rdquo; es una técnica de encadenamiento usada en muchos
lenguajes de programación orientados al objeto.</p>
<p>En la programación orientada al objeto usamos el encadenamiento de
métodos para ejecutar una serie de operaciones sobre un objeto.</p>
<p>Veamos un ejemplo en Scala: <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> name<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> age<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> setName<span style="color:#f92672">(</span>newName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span>name <span style="color:#66d9ef">=</span> newName<span style="color:#f92672">;</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> setAge<span style="color:#f92672">(</span>newAge<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span>age <span style="color:#66d9ef">=</span> newAge<span style="color:#f92672">;</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span> <span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> introduce <span style="color:#f92672">{</span> println<span style="color:#f92672">(</span> <span style="color:#e6db74">s&#34;Hello, my name is </span><span style="color:#e6db74">$name</span><span style="color:#e6db74"> and I am </span><span style="color:#e6db74">$age</span><span style="color:#e6db74"> years old.&#34;</span> <span style="color:#f92672">)</span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">object</span> <span style="color:#a6e22e">App</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> main<span style="color:#f92672">(</span>args<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Array</span><span style="color:#f92672">[</span><span style="color:#66d9ef">String</span><span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Output: Hello, my name is Peter and I am 21 years old.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">().</span>setName<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Peter&#34;</span><span style="color:#f92672">).</span>setAge<span style="color:#f92672">(</span><span style="color:#ae81ff">21</span><span style="color:#f92672">).</span>introduce
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Lo que hemos hecho acá es crear un objeto de tipo Person, al que le
aplicamos una secuencia de métodos que alteran su estado y generan una
salida. Esa cadena de métodos  permite escribir código más compacto.
Esta técnica es muy útil para desarrollar lenguajes de dominio
específico (DSL)<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>.</p>
<p>Pero un programador funcional encontraría esto una aberración, porque en
cada llamada estamos alterando el estado del objeto y eso es un pecado
mortal en este paradigma, donde el concepto de <strong>inmutabilidad</strong> es
esencial.</p>
<p>¿Qué significa esto de la inmutabilidad?</p>
<p>Lo que queremos es que las estructuras de datos no cambien su valor a lo
largo del proceso. Por ejemplo, si tenemos un registro que contiene el
nombre de una persona el valor escrito allí no debe cambiar, nunca.</p>
<p>¿Pero las personas cambian de nombre, verdad?</p>
<p>Así es, aunque podríamos cuestionarnos si la persona que a los
veinticinco cambia su nombre a Jorge es la misma persona que recibió el
nombre Pedro al nacer.</p>
<p>Pero independiente de la filosofía, debemos hacernos cargo del cambio,
la respuesta que asegura la inmutabilidad es que debemos crear un nuevo
registro con el nuevo valor y olvidarnos del valor anterior (o dejarlo
por ahí, para que lo revisen los historiadores después).</p>
<p>Así que veamos cómo sería el código con una estructura de datos
inmutable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> name<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> age<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> setName<span style="color:#f92672">(</span>newName<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span> newName<span style="color:#f92672">,</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span>age <span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> setAge<span style="color:#f92672">(</span>newAge<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span>name<span style="color:#f92672">,</span> newAge <span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> introduce <span style="color:#f92672">{</span> println<span style="color:#f92672">(</span> <span style="color:#e6db74">s&#34;Hello, my name is </span><span style="color:#e6db74">$name</span><span style="color:#e6db74"> and I am </span><span style="color:#e6db74">$age</span><span style="color:#e6db74"> years old.&#34;</span> <span style="color:#f92672">)</span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">object</span> <span style="color:#a6e22e">App</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">def</span> main<span style="color:#f92672">(</span>args<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Array</span><span style="color:#f92672">[</span><span style="color:#66d9ef">String</span><span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Output: Hello, my name is Peter and I am 21 years old.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">Person</span><span style="color:#f92672">().</span>setName<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Peter&#34;</span><span style="color:#f92672">).</span>setAge<span style="color:#f92672">(</span><span style="color:#ae81ff">21</span><span style="color:#f92672">).</span>introduce
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Noten que cada método genera un nuevo objeto Person. En este caso
particular el objeto anterior se pierde y es liberado por el
<a href="https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)">Garbage Collector</a>
del lenguaje de manera automática. A nosotros como programadores no nos
interesa más (aunque supongo que al ingeniero de sistema, encargado de
operar nuestro software en producción, sería bueno avisarle que asigne
memoria suficiente y haga un tunning de los parámetros de la máquina
virtual, un poco de cortesía no es mala).</p>
<h2 id="cadena-de-responsabilidades">Cadena de Responsabilidades</h2>
<blockquote>
<p>&ldquo;Thunder only happens when it&rsquo;s raining<br>
Players only love when they are playing&rdquo;\</p></blockquote>
<p>La cadena de reponsabilidades es un patrón de diseño de software, que
pretende resolver dos problemas:\</p>
<ul>
<li>Evitar el acoplamiento entre el que envía (sender) un requerimiento
(request) y quien lo recibe (receiver).\</li>
<li>Debería ser posible que más de un receptor sea capaz de manejar un
requerimiento (request).[4]</li>
</ul>
<figure class="Diagrama de clases que describe el patrón cadena de responsabilidades"><img src="https://d2dspjyoh5c79p.cloudfront.net/1e7cb883-f2fc-11e7-a030-2b5831f8ecb5-aa9f18b7">
</figure>

<p>Lo que dice este patrón es que un requerimiento es procesado por una
serie, o cadena, de receptores, los que a priori son desconocidos por el
emisor (sender).</p>
<p>Esto es muy útil en las interfaces de usuario, por ejemplo. Cuando tocas
en la pantalla un objeto se espera que exista una &ldquo;vista&rdquo; que sea
capaz de procesar ese evento, esta vista puede que no sepa qué hacer con
el evento, entonces lo deriva a una vista superior y así el evento sube
a lo largo de la cadena hasta encontrar un objeto que sepa procesar el
evento.</p>
<p>Lo importante acá es que podemos distribuir la <em><strong>responsabilidad de
procesamiento</strong></em> a lo largo de la cadena.</p>
<h2 id="cadena-de-mensajes">Cadena de Mensajes</h2>
<blockquote>
<p>&ldquo;Break the silence<br>
Damn the dark, damn the light&rdquo;</p></blockquote>
<p>No todo es bueno con las cadenas. Por ejemplo, existe un problema, algo
que llamamos <a href="https://en.wikipedia.org/wiki/Code_smell">code smell</a><sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup>,
denominado cadena de mensajes, o <a href="https://sourcemaking.com/refactoring/smells/message-chains">Message Chain</a>.</p>
<p>Martin Fowler lo describe en su libro <a href="http://amzn.to/2AAnv92">&ldquo;Refactoring: Improving the
Design of Existing Code&rdquo;</a>, de la siguiente
forma:</p>
<figure><img src="https://d2dspjyoh5c79p.cloudfront.net/7710c646-f30a-11e7-a030-2b5831f8ecb5-aa9f18b7"
    alt="Escenario de una cadena de mensajes"><figcaption>
      <p>Escenario de una cadena de mensajes</p>
    </figcaption>
</figure>

<p>Supongamos que a partir  un objeto cliente queremos obtener el manager
de una persona, para esto el código que debemos escribir es el
siguiente:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>manager <span style="color:#66d9ef">=</span> person<span style="color:#f92672">.</span>getDepartment<span style="color:#f92672">().</span>getManager<span style="color:#f92672">()</span>
</span></span></code></pre></div><p>Esto podría ser peor, hay situaciones en que puede darse una cadena
larga de mensajes para poder obtener un valor:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>f <span style="color:#66d9ef">=</span> client<span style="color:#f92672">.</span>getA<span style="color:#f92672">().</span>getB<span style="color:#f92672">().</span>getC<span style="color:#f92672">().</span>getD<span style="color:#f92672">().</span>getF<span style="color:#f92672">()</span>
</span></span></code></pre></div><p>Esto es diferente al encadenamiento de métodos (method chaining), porque
en ese caso estamos operando sobre métodos de la misma clase.</p>
<p>En el encadenamiento de mensajes estamos navegando una jerarquía de
clases para llegar a obtener el método que necesitamos.</p>
<h2 id="la-ley-de-demeter">La Ley de Demeter</h2>
<blockquote>
<p>&ldquo;I know there&rsquo;s nothing to say<br>
Someone has taken my place&rdquo;</p></blockquote>
<p>El encadenamiento de mensajes es una forma de acoplamiento, y una forma
de evitar este problema es respetando la Ley de Demeter, o Principio del
Menor Conocimiento, que dice lo siguiente:</p>
<p>Dado un método <em><strong>m</strong></em> de un objeto <em><strong>O</strong></em> este sólo puede invodar los
métodos de los siguientes tipos de objetos:</p>
<ol>
<li>El objeto <em><strong>O</strong></em> en si mismo.</li>
<li>Los parámetros de <em><strong>m</strong></em>.</li>
<li>Cualquier objeto creado o instanciado dentro de <em><strong>m</strong></em>.</li>
<li>Los objetos que son componentes de <em><strong>O</strong></em>.</li>
<li>Una variable global, accesible por <em><strong>O</strong></em>, en el ámbito de
ejecución de <em><strong>m</strong></em>.</li>
</ol>
<p>De este modo lo que deberíamos hacer para corregir el ejemplo anterior
es lo siguiente:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>manager <span style="color:#66d9ef">=</span> person<span style="color:#f92672">.</span>getManager<span style="color:#f92672">()</span>
</span></span></code></pre></div><p>Esto implica hacer una refactorización que se conoce como
<a href="https://refactoring.com/catalog/hideDelegate.html">&ldquo;Hide Delegate&rdquo;</a>:</p>
<figure><img src="https://d2dspjyoh5c79p.cloudfront.net/6c9d1df7-f30d-11e7-a030-2b5831f8ecb5-aa9f18b7"
    alt="Reorganización de la clase Person para permitir Hide Delegate"><figcaption>
      <p>Reorganización de la clase Person para permitir Hide Delegate</p>
    </figcaption>
</figure>

<h2 id="intermediario">Intermediario</h2>
<blockquote>
<p>&ldquo;Tell me why<br>
Everything turned around<br>
Packing up<br>
Shacking up&rsquo;s all you wanna do&rdquo;</p></blockquote>
<p>Resulta que si aplicamos indiscriminadamente la Ley de Demeter nos
podemos meter en un lio.</p>
<p>Supongan que ahora a la clase Person le agregamos los métodos
getDivision(), getDirector(), getCountry(), getDivisionManager(), etc,
para acceder a distintos objetos dentro de la jerarquía.</p>
<p>La clase Person se transforma en un objeto del cual todos los demás
dependen, y además esta queda dependiendo de muchas más clases.
Se convierte en un intermediario. Todo debe pasar a través de esta
clase, lo que tampoco es bueno.</p>
<p>A este síntoma, o code smell, se le llama
<a href="https://refactoring.com/catalog/removeMiddleMan.html">MiddleMan.</a></p>
<p>¿Cuál es la solución a este problema?</p>
<p>La mala noticia que la solución para este code smell se llama Message
Chain, la famosa cadena de mensajes. de la que tratábamos de huir hace
un rato. :D</p>
<h2 id="intermediarios-vs-cadenas">Intermediarios vs Cadenas</h2>
<blockquote>
<p>Don't stop thinking about tomorrow<br>
Don't stop, it'll soon be here<br>
It'll be here better than before<br>
Yesterday's gone, yesterday's gone</p></blockquote>
<p>Esto puede resultar algo angustiante. Por un lado nos dicen que un
patrón interesante de usar es el encadenamiento de métodos, y la cadena
de responsabilidad, pero por otro lado la cadena de mensajes, que se
parece al encadenamiento de métodos, viola la Ley de Demeter. Pero en el
afán de respetar la Ley de Demeter podemos caer en la trampa del
MiddleMan, para la cual la única salida es violar la Ley de Demeter
introduciéndo la cadena de mensajes. ¡Es para enloquecer!</p>
<p>Así es el diseño de software, una serie de decisiones entre
requerimientos que a veces entran en conflicto.</p>
<p>Pero además,  ¿no les parece que hemos tropezado con algo más
fundamental acá?</p>
<p>Así es, porque esta dicotomía entre centralizar o descentralizar, alojar
la responsabilidad en un punto central, versus distribuirla en una
cadena es algo que se da en distintos contextos, no sólo tecnológicos.</p>
<p>Piensen en otra cadena, muy famosa en estos días, me refiero al Block
Chain. Es una tecnología que permite distribuir la confianza, o para ser
más preciso, el consenso, entre toda una red, que <strong>trabaja
colectivamente</strong>,  usando para esto una <strong>cadena inmutable</strong>.</p>
<p>El blockchain es una solución interesante que empezaremos a estudiar en
los siguientes artículos. Algunas preguntas que pretendo resolver son:
¿para qué sirve el blockchain? ¿Es el blockchain la solución adecuada
para ciertos problemas, o a veces es mejor usar un <strong>MidleMan</strong>?</p>
<p>Aunque este artículo parece que habla de programación, en realidad no es
así, habla de diseño de soluciones, de restricciones y por supuesto rock
and roll.</p>
<p>En este texto he intentado introducir algunos conceptos básicos que son
necesarios para entender lo que viene, así que los invito a estar
atentos al segundo artículo de esta serie, que he llamado <em><strong>&ldquo;The
Chain&rdquo;</strong></em>, donde nos desviaremos un poco para hablar de consenso.</p>
<h3 id="notas">Notas:</h3>
<p>Las citas son de las canciones &ldquo;The Chain&rdquo;, &ldquo;Dreams&rdquo;, &ldquo;Second Hands
News&rdquo; y &ldquo;Don´t Stop&rdquo;, del álbum &ldquo;Rumours&rdquo; de Fleetwood Mac, banda
que nos acompañará en esta aventura.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Hay más anécdotas sobre The Chain en <a href="http://www.songfacts.com/detail.php?id=6269">Songfacts.</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>Ejemplos tomados y adaptados desde Wikipedia:
<a href="https://en.wikipedia.org/wiki/Method_chaining">https://en.wikipedia.org/wiki/Method_chaining</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p>Puedes leer sobre aplicar DSLs con method chaining en est artículo
en InfoQ <a href="https://www.infoq.com/articles/internal-dsls-java">https://www.infoq.com/articles/internal-dsls-java</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4">
<p>Un code smell es cualquier síntoma en el código fuente de un
programa que indica que hay un potencial problema:
<a href="https://en.wikipedia.org/wiki/Code_smell">https://en.wikipedia.org/wiki/Code_smell</a>&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 </div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>2008 words</span>
    <span>13 - 17 minutes read</span></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#cadenas">Cadenas</a></li>
    <li><a href="#encadenamiento-inmutable">Encadenamiento Inmutable</a></li>
    <li><a href="#cadena-de-responsabilidades">Cadena de Responsabilidades</a></li>
    <li><a href="#cadena-de-mensajes">Cadena de Mensajes</a></li>
    <li><a href="#la-ley-de-demeter">La Ley de Demeter</a></li>
    <li><a href="#intermediario">Intermediario</a></li>
    <li><a href="#intermediarios-vs-cadenas">Intermediarios vs Cadenas</a>
      <ul>
        <li><a href="#notas">Notas:</a></li>
      </ul>
    </li>
  </ul>
</nav><h3>Attachments</h3>
    <ul><li><a href="http://localhost:1313/post/2018/the-chain/featured.png">featured.png</a></li></ul><h3>Related</h3>
    <ul><li><a href="/post/2017/como-ganarle-a-santa-claus/">Cómo ganarle a Santa Claus</a></li><li><a href="/post/2017/arquitectura-y-orquestacion/">Arquitectura y Orquestación</a></li><li><a href="/post/2013/roles-y-funciones/">Roles y Funciones</a></li><li><a href="/post/2013/estructura/">Estructura</a></li><li><a href="/post/2013/utilidad-belleza-y-firmeza/">Utilidad, Belleza y Firmeza</a></li></ul></aside></div>
  </div>
</body>
</html>
