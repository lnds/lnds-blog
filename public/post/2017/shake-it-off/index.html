<!DOCTYPE html>
<html lang="es-cl" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Shake it off | La Naturaleza del Software</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/post/2017/shake-it-off/">
  <meta property="og:site_name" content="La Naturaleza del Software">
  <meta property="og:title" content="Shake it off">
  <meta property="og:description" content="A propósito de su canción “Shake it off”, Taylor Swift dijo:
“He aprendido la dura lección de que la gente puede decir lo que quiera de nosotros en cualquier momento, y no podemos controlar eso. La única cosa que podemos controlar es nuestra reacción a eso.”
La joven cantante elaboró, en una entrevista posterior, que antes había abordado el tema, pero desde una perspectiva más victimizante, en una canción titulada “Mean”, pero decidió tomarse las cosas con humor, lo que en mi opinión muestra un crecimiento notable como persona, siendo tan joven. Por supuesto, la exposición de Swift es muy distinta a un joven normal, un milenial, como hemos denominado a todos los miembros de su generación, estereotipándolos de paso, para mal en muchas ocasiones.\">
  <meta property="og:locale" content="es_cl">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2017-10-09T08:25:11-03:00">
    <meta property="article:modified_time" content="2017-10-09T08:25:11-03:00">
    <meta property="article:tag" content="Rock">
    <meta property="article:tag" content="Lenguajes De Programación">
    <meta property="article:tag" content="Desafíos">
    <meta property="article:tag" content="Swift">
    <meta property="og:image" content="http://localhost:1313/post/2017/shake-it-off/featured.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/post/2017/shake-it-off/featured.png">
  <meta name="twitter:title" content="Shake it off">
  <meta name="twitter:description" content="A propósito de su canción “Shake it off”, Taylor Swift dijo:
“He aprendido la dura lección de que la gente puede decir lo que quiera de nosotros en cualquier momento, y no podemos controlar eso. La única cosa que podemos controlar es nuestra reacción a eso.”
La joven cantante elaboró, en una entrevista posterior, que antes había abordado el tema, pero desde una perspectiva más victimizante, en una canción titulada “Mean”, pero decidió tomarse las cosas con humor, lo que en mi opinión muestra un crecimiento notable como persona, siendo tan joven. Por supuesto, la exposición de Swift es muy distinta a un joven normal, un milenial, como hemos denominado a todos los miembros de su generación, estereotipándolos de paso, para mal en muchas ocasiones.\">

    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/bundle.css">

      <script src="/js/bundle.js"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/" style="color: inherit;">La Naturaleza del Software</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a
      >Posts</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a
      >Posts</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/post/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>Shake it off</h1><time class="dim" datetime="2017-10-09T08:25:11-03:00">October 9, 2017</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/tags/rock/">#rock</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/lenguajes-de-programaci%C3%B3n/">#lenguajes de programación</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/desaf%C3%ADos/">#desafíos</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tags/swift/">#swift</a>
      </div></ol></div>
  <section class="page-section"><p>A propósito de su canción &ldquo;Shake it off&rdquo;, Taylor Swift dijo:</p>
<blockquote>
<p>&ldquo;He aprendido la dura lección de que la gente puede decir lo que
quiera de nosotros en cualquier momento, y no podemos controlar eso.
La única cosa que podemos controlar es nuestra reacción a eso.&rdquo;</p></blockquote>
<p>La joven cantante elaboró, en una entrevista posterior, que antes había
abordado el tema, pero desde una perspectiva más victimizante, en una
canción titulada
<a href="https://www.youtube.com/watch?v=jYa1eI1hpDE">&ldquo;Mean&rdquo;</a>, pero decidió
tomarse las cosas con humor, lo que en mi opinión muestra un crecimiento
notable como persona, siendo tan joven. Por supuesto, la exposición de
Swift es muy distinta a un joven normal, un milenial, como hemos
denominado a todos los miembros de su generación, estereotipándolos de
paso, para mal en muchas ocasiones.\</p>
<figure><img src="https://d2dspjyoh5c79p.cloudfront.net/a7539bc0-ad07-11e7-a030-2b5831f8ecb5-aa9f18b7"
    alt="Shake it off"><figcaption>
      <p>Shake it off</p>
    </figcaption>
</figure>

<h2 id="swift">Swift</h2>
<p>La elección de Taylor Swift para hablar del lenguaje de programación
desarrollado por Apple es demasiado obvia, poco original, pero ¿saben
qué? no me importa lo que piensen, les saco la lengua como lo haría
Taylor Swift, me sacudo sus comentarios trolls y sigo adelante.</p>
<p>Swift es un lenguaje joven, creado en 2014, diseñado originalmente por
<a href="http://www.nondot.org/sabre/">Chris Lattner</a>, el genio detrás de
<a href="https://llvm.org/">LLVM</a>. En estos momentos el lenguaje está siendo
desarrollado por un equipo dentro de Apple y a pesar de su corta vida,
ya va en la versión 4.</p>
<figure><img src="https://d2dspjyoh5c79p.cloudfront.net/d30f4981-ad07-11e7-a030-2b5831f8ecb5-aa9f18b7"
    alt="Chriss Lattner"><figcaption>
      <p>Chriss Lattner</p>
    </figcaption>
</figure>

<p>No voy a decir que Swift es un lenguaje que me guste, al contrario, he
encontrado varios problemas en su compilador y encuentro que en muchos
aspectos es un pastiche de muchos otros lenguajes que hay en la escena
actual.</p>
<p>Es un lenguaje pop, como Taylor, orientado al programador de Apps. Su
biblioteca básica está diseñada para operar en un entorno de Apps. Lo
que se nota por ejemplo, en el acceso a datos en almacenamiento
secundario. Pero ya hablaremos de
eso.</p>
<p>Así que Swift es, siguiendo esta analogía con estrellas del rock, un
lenguaje que se aleja la linea de otros lenguajes que hemos analizado en
estos desafíos, sobre <a href="https://www.lnds.net/blog/lnds/2016/1/9/esos-raros-lenguajes-nuevos">&ldquo;esos raros lenguajes nuevos&rdquo;</a>. </p>
<p>En términos de las analogías que hemos realizado hasta ahora, que es más
cercano al pop, así que sumado a su juventud y orientación a facilitar
la programación de Apps, así que me parece que escoger a Taylor Swift es
adecuado.</p>
<p>No es esto una actitud de desprecio, Taylor Swift es una gran artista, y
me gustan varias de sus canciones, pero hay que reconocer cuál es el
ámbito en que se mueve dentro de la música (entre el Pop Country y el
Pop Rock). Del mismo modo Swift, siento que está diseñado y optimizado
para cierto tipo de aplicaciones, aunque tiene lo necesario para
desarrollar todo tipo de sistemas, no es su principal foco.</p>
<h2 id="del-country-al-pop">Del Country al Pop</h2>
<p>Taylor Swift partió con el estilo country pop, inspirada por Shania
Twain y posteriormente por la vida de Faith Hill, que decidió mudarse a
Nashville, Tennessee, para desarrollar su carrera artística. Tuvo mucho
éxito, recibiendo diversos premios y reconocimientos de la industria
Country. Incluso su canción &ldquo;Mean&rdquo; ganó el premio a mejor canción
country en los Grammys en 2012. Taylor ganó fama de ser una buena
narradora de experiencias personales en sus canciones.</p>
<figure><img src="https://d2dspjyoh5c79p.cloudfront.net/7b5bf66f-ad07-11e7-a030-2b5831f8ecb5-aa9f18b7"
    alt="Taylor tocando el banjo mostrando su faceta Country, interpretando Mean"><figcaption>
      <p>Taylor tocando el banjo mostrando su faceta Country, interpretando Mean</p>
    </figcaption>
</figure>

<p>Swift, el lenguaje, nació como una manera de modernizar el desarrollo
para iOS, el sistema operativo para móviles de Apple.</p>
<p>La introducción del libro <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html">&ldquo;Swift Programming Language&rdquo;</a>, dice:</p>
<blockquote>
<p>&ldquo;Swift es una manera fantástica de escribir software, ya sea para
teléfonos, escritorios, servidores y todo lo que corra software. Es un
lenguage de programación seguro, rápido e interactivo, que combina lo
mejor del pensamiento moderno en lenguajes con la sabiduría de la
amplia cultura ingenieril de Apple y las diversas contribuciones de su
comunidad open source.&rdquo;</p></blockquote>
<p>Me llama la atención el estilo, el uso de las palabras es tan propio de
Apple, donde todo es &ldquo;fantástico&rdquo; o &ldquo;asombroso&rdquo;. Pero la realidad no
es tan así. Swift sigue siendo por debajo, en muchos aspectos, una capa
de abstracción sobre Objective C.</p>
<p>Cada iteración de Swift, cada nueva versión, sólo cierra algún flanco
dentro de esa abstracción.</p>
<p>La cita de arriba dice que con Swift puedo escribir software para
cualquier tipo de ambiente, pues bien, eso es cierto, pero en realidad
no siempre termino escribiéndolo en Swift, sino que en C. Porque debajo
de Swift aún está C. </p>
<p>Por ejemplo, en <a href="/blog/lnds/2017/01/02/vectores">la solución del desafío 2</a>, escribí este
código:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> fentrada = fopen(entrada, <span style="color:#e6db74">&#34;rt&#34;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> fentrada == <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>         print(<span style="color:#e6db74">&#34;no pudo abrir archivo entrada: </span><span style="color:#e6db74">\(</span>entrada<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>          exit(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">let</span> fsalida = fopen(salida, <span style="color:#e6db74">&#34;wt&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> fsalida == <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>           print(<span style="color:#e6db74">&#34;no pudo abrir archivo salida: </span><span style="color:#e6db74">\(</span>salida<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>            exit(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">let</span> BUFFER_SIZE : Int32 = <span style="color:#ae81ff">4096</span>
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">var</span> buf = Array&lt;Int8&gt;(repeating: <span style="color:#ae81ff">0</span>, count: Int(BUFFER_SIZE))
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">var</span> nl = <span style="color:#ae81ff">0</span> <span style="color:#75715e">// numero de linea</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> fgets(&amp;buf, BUFFER_SIZE, fentrada) <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> bufOut = procesarLinea(buf, nl)
</span></span><span style="display:flex;"><span>         fputs(bufOut, fsalida)
</span></span><span style="display:flex;"><span>          nl <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>       fclose(fentrada)
</span></span><span style="display:flex;"><span>        fclose(fsalida)
</span></span></code></pre></div><p>Salvo por unos let, var y la forma de escribir los if y while, esto no
es muy distinto de hacerlo en C. Esto se puede hacer de otra manera en
Swift, pero a riesgo de perder en performance, o complicaciones cuando
la memoria sea limitada.</p>
<p>Déjenme darle otro ejemplo, cuando implementé el desafío 4, en el caso
de la lectura, necesitaba leer el archivo completamente y depositarlo en
un arreglo de bytes. Esto se hace así en Swift:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> data = NSData(contentsOfFile: inputFile) {
</span></span><span style="display:flex;"><span>      bytes = [UInt8](repeating: <span style="color:#ae81ff">0</span>, count: data.length)
</span></span><span style="display:flex;"><span>               data.getBytes(&amp;bytes, length: data.length)
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>NSData es una estructura que nos permite operar con contenidos en un
archivo. Ahora bien, para escribir archivos lo que hice es más o menos
lo siguiente:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> out = Data()
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> nsdata = NSData(data: out)
</span></span><span style="display:flex;"><span>      nsdata.write(toFile: output, atomically: <span style="color:#66d9ef">true</span>)
</span></span></code></pre></div><p>Esto es un reflejo de que en Swift los archivos se ven como un elemento
donde persistir la información, no muy distinto de cualquier recurso que
necesite una App (como un ícono, o una imagen). </p>
<p>Esta es una buena abstracción, pero en ciertos casos no es adecuada, y
en esos casos aprovechas el hecho de que Swift sigue siendo C y puedes
invocar las funciones de stdlib, o stdio propias de ANSI C directamente
desde tu código en Swift.</p>
<p>En resumen, lo que quiero decir, es que Swift es un lenguaje de
propósito general, pero las abstracciones que provee, tanto a nivel de
lenguaje, como de bibliotecas parecen estar pensadas principalmente para
soportar el desarrollo de aplicaciones móviles (Apps), por sobre otro
tipo de problemas. Eso puede traer problemas, si pretendes usar Swift en
programación de sistemas, o en el servidor, sobretodo en seguridad.</p>
<h2 id="huffman-en-swift"><strong>Huffman en Swift</strong></h2>
<p>La implementación del problema 4 en Swift es realmente aburrida. La
mayor parte del tiempo lo gasté en adaptar las clases BitInputStream y
BitOutputStream, debido a que tuve que aprender cómo abstraer el manejo
de streams de bytes usando Data y NSData. El resto fue simplemente
traducir las solución de Go a Swift, un proceso bastante simple.</p>
<p>Las clases en Swift no tienen muchas características novedosas. Veamos
como implementé los árboles:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>      <span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Tree</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">freq</span>() -&gt; UInt
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">writeTo</span>(writer: BitOutputStream)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">dumpCodes</span>(codes: <span style="color:#66d9ef">inout</span> [String], <span style="color:#66d9ef">prefix</span>: String)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">readChar</span>(reader: BitInputStream) -&gt; UInt8
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Leaf</span> : Tree {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> frecuency : UInt
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> symbol : UInt8
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">init</span>(frq:UInt, sym:UInt8) {
</span></span><span style="display:flex;"><span>            frecuency = frq
</span></span><span style="display:flex;"><span>            symbol = sym
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">freq</span>() -&gt; UInt {
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">return</span> frecuency
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">writeTo</span>(writer: BitOutputStream) {
</span></span><span style="display:flex;"><span>          writer.writeBit(bit: <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>          writer.writeByte(byte: UInt16(symbol))
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">dumpCodes</span>(codes: <span style="color:#66d9ef">inout</span> [String], <span style="color:#66d9ef">prefix</span>: String) {
</span></span><span style="display:flex;"><span>          codes[Int(symbol)] = <span style="color:#66d9ef">prefix</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">readChar</span>(reader: BitInputStream) -&gt; UInt8 {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">return</span> symbol
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> : Tree {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> left: Tree
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> right: Tree
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">init</span>( <span style="color:#66d9ef">left</span>: Tree, <span style="color:#66d9ef">right</span>: Tree) {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span> = <span style="color:#66d9ef">left</span>
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">right</span> = <span style="color:#66d9ef">right</span>
</span></span><span style="display:flex;"><span>        }   
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">freq</span>() -&gt; UInt {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">left</span>.freq() <span style="color:#f92672">+</span> <span style="color:#66d9ef">right</span>.freq()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">writeTo</span>(writer: BitOutputStream) {
</span></span><span style="display:flex;"><span>          writer.writeBit(bit: <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">left</span>.writeTo(writer: writer)
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">right</span>.writeTo(writer: writer)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">dumpCodes</span>(codes: <span style="color:#66d9ef">inout</span> [String], <span style="color:#66d9ef">prefix</span>: String) {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">left</span>.dumpCodes(codes: &amp;codes, <span style="color:#66d9ef">prefix</span>: <span style="color:#66d9ef">prefix</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;0&#34;</span>)
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">right</span>.dumpCodes(codes: &amp;codes, <span style="color:#66d9ef">prefix</span>: <span style="color:#66d9ef">prefix</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">readChar</span>(reader: BitInputStream) -&gt; UInt8 {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> reader.readBool() {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">right</span>.readChar(reader: reader)
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">left</span>.readChar(reader: reader)
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span></code></pre></div><p>Los protocolos son los equivalente a interfaces en otros lenguajes. A
diferencia de Go, en Swift la declaración de tipos es estática, no se
infiere como en Go. Así que las clases Node y Leaf deben implementar el
protocolo Tree.</p>
<p>Aprender la sintaxis de clases y protocolos en Swift es algo que no
lleva mucho tiempo a un programador que venga de otros lenguajes como
Java o C#. Es más difícil entender cómo los usa Go que Swift. Los
constructores se declaran con el método init.</p>
<p>Una particularidad de Swift, que es algo heredado de Objective C, que a
su vez viene de SmallTalk, es que los parámetros deben ser nombrados.</p>
<p>Esto me permitió crear dos constructores para la clase HuffTree que
reciben el mismo tipo de argumento, lo que es interesante:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HuffTree</span> { 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">init</span>(buildFrom: BitInputStream) {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">init</span>(readFrom: BitInputStream) {
</span></span><span style="display:flex;"><span>            ....
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Lo que diferencia a ambos métodos es el nombre del argumento, algo que
no se encuentra en muchos otros lenguajes, lo que puede dar cierto grado
de expresividad adicional.</p>
<h2 id="extensiones">Extensiones</h2>
<p>¿Se puede resolver este problema de otra manera en Swift?<br>
Yo supongo que sí. </p>
<p>Swift tiene un tipo enumerado que permite implementar algo similar a los
tipos de datos algebraicos.</p>
<p>Así que se podríamos partir declarando algo como lo siguiente:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>       <span style="color:#66d9ef">indirect</span> <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Tree</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">case</span> Empty
</span></span><span style="display:flex;"><span>           <span style="color:#66d9ef">case</span> Leaf(UInt, UInt8)
</span></span><span style="display:flex;"><span>           <span style="color:#66d9ef">case</span> Node(UInt, Tree, Tree)
</span></span><span style="display:flex;"><span>      }
</span></span></code></pre></div><p>La clausula indirect permite crear una estructura recursiva. </p>
<p>En base a esto se puede construir una solución muy parecida a la que
<a href="/sblog/lnds/2017/09/24/red-barchetta">implementé en Rust</a>. Esto lo
pueden desarrollar por su cuenta, y si a alguien le interesa me puede
enviar su solución como un pull request. Quizás en algún momento me
anime y la implemente por mi cuenta, pero me agradaría recibir una
contribución de alguien que sepa más de Swift.</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/nfWlot6h_JM?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<h2 id="referencias">Referencias:</h2>
<p>Repositorio con la solución del desafío 4 en
Swift: <a href="https://github.com/lnds/9d9l/tree/master/desafio4/swift">https://github.com/lnds/9d9l/tree/master/desafio4/swift</a></p>
<p>LLVM: <a href="https://llvm.org/">https://llvm.org/</a></p>
<p>Chris Lattner: <a href="http://www.nondot.org/sabre">http://www.nondot.org/sabre</a></p>
<p>Swift Programming Language: <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html">https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html</a></p>
<p>Taylor Swift: <a href="https://taylorswift.com/">https://taylorswift.com/</a></p>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 </div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>1654 words</span>
    <span>11 - 14 minutes read</span></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#swift">Swift</a></li>
    <li><a href="#del-country-al-pop">Del Country al Pop</a></li>
    <li><a href="#huffman-en-swift"><strong>Huffman en Swift</strong></a></li>
    <li><a href="#extensiones">Extensiones</a></li>
    <li><a href="#referencias">Referencias:</a></li>
  </ul>
</nav><h3>Attachments</h3>
    <ul><li><a href="http://localhost:1313/post/2017/shake-it-off/featured.png">featured.png</a></li></ul><h3>Related</h3>
    <ul><li><a href="/post/2017/when-the-heart-rules-the-mind/">When The Heart Rules the Mind</a></li><li><a href="/post/2016/como-obtener-el-reporte-del-clima/">Cómo obtener el reporte del clima</a></li><li><a href="/post/2016/chubascos-de-ligera-intensidad/">Chubascos de ligera intensidad</a></li><li><a href="/post/2016/reporte-del-clima/">Reporte del Clima</a></li><li><a href="/post/2017/red-barcheta/">Red Barchetta</a></li></ul></aside></div>
  </div>
</body>
</html>
