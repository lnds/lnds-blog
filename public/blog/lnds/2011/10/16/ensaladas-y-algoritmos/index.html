<!DOCTYPE html>
<html lang="es-cl" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ensaladas y algoritmos | La Naturaleza del Software</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/blog/lnds/2011/10/16/ensaladas-y-algoritmos/">
  <meta property="og:site_name" content="La Naturaleza del Software">
  <meta property="og:title" content="Ensaladas y algoritmos">
  <meta property="og:description" content="Hace unos años, probablemente inspirado por Ratatouille, me dió por cocinar. Mi mujer dice que no cocino mal, pero resulto un tanto caro como “chef”, aparte de desordenado (algo para mejorar). Pero he aprendido a preparar algunos platos, y he experimentado con otros, es una actividad que resulta bastante grata y relajante, quizás porque hay una relación con programar un algoritmo eficiente.
Una de los platos mas sencillos y entretenidos para aprender a cocinar son las ensaladas, mejor si van acompañadas de alguna salsa. Ayer sábado en la tarde improvisamos con mi hija mayor y mi esposa una deliciosa ensalada de manzanas verdes con atún. La receta va al final de este post, lo interesante fue el proceso aplicado para armar esta ensalada en particular.">
  <meta property="og:locale" content="es_cl">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2011-10-16T08:25:11-03:00">
    <meta property="article:modified_time" content="2011-10-16T08:25:11-03:00">
    <meta property="article:tag" content="Algoritmos">
    <meta property="article:tag" content="Map-Reduce">
    <meta property="article:tag" content="Big Data">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Ensaladas y algoritmos">
  <meta name="twitter:description" content="Hace unos años, probablemente inspirado por Ratatouille, me dió por cocinar. Mi mujer dice que no cocino mal, pero resulto un tanto caro como “chef”, aparte de desordenado (algo para mejorar). Pero he aprendido a preparar algunos platos, y he experimentado con otros, es una actividad que resulta bastante grata y relajante, quizás porque hay una relación con programar un algoritmo eficiente.
Una de los platos mas sencillos y entretenidos para aprender a cocinar son las ensaladas, mejor si van acompañadas de alguna salsa. Ayer sábado en la tarde improvisamos con mi hija mayor y mi esposa una deliciosa ensalada de manzanas verdes con atún. La receta va al final de este post, lo interesante fue el proceso aplicado para armar esta ensalada en particular.">

    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/bundle.css">

      <script src="/js/bundle.js"></script><script defer src="/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js" integrity="sha256-HZgPhN8R8&#43;t8jF8X9UHUmgYRYI3xed10&#43;n8GIl61as4="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/" style="color: inherit;">La Naturaleza del Software</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a href="https://Newsletter.lnds.net"
      >Newsletter</a>
    </div>
    <div class="nav-item">
      <a href="/books/"
      >Books</a>
    </div>
    <div class="nav-item">
      <a href="/about/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>Ensaladas y algoritmos</h1><time class="dim" datetime="2011-10-16T08:25:11-03:00">October 16, 2011</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/tag/algoritmos/">#algoritmos</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/map-reduce/">#map-reduce</a>
      </div><div class="tag">
        <a href="http://localhost:1313/tag/big-data/">#big data</a>
      </div></ol></div>
  <section class="page-section"><p>Hace unos  años, probablemente inspirado por
<a href="/blog/2007/07/ratatouille-lecciones-de-ingenieria-de-s.html">Ratatouille</a>,
me dió por cocinar. Mi mujer dice que no cocino mal, pero resulto un
tanto caro como &ldquo;chef&rdquo;, aparte de desordenado (algo para mejorar). Pero
he aprendido a preparar algunos platos, y he experimentado con otros, es
una actividad que resulta bastante grata y relajante, quizás porque hay
una relación con programar un algoritmo eficiente.</p>
<p>Una de los platos mas sencillos y entretenidos para aprender a cocinar
son las ensaladas, mejor si van acompañadas de alguna salsa. Ayer sábado
en la tarde improvisamos con mi hija mayor y mi esposa una deliciosa
ensalada de manzanas verdes con atún. La receta va al final de este
post, lo interesante fue el proceso aplicado para armar esta ensalada en
particular.</p>
<p>Teníamos una restricción de cinco minutos para ejecutar la tarea, así
que dividimos el trabajo, alguien picaba las manzanas, mientras otra
persona preparaba la lechuga, y un tercero mezclaba manzanas y lechugas
con el atún. Al final mi hija preparó la salsa, la echamos sobre la
ensalada, la distribuimos sobre cada plato y servimos. Fue todo bastante
rápido.</p>
<p><img src="atun-con-manzana.jpg" alt="atun-con-manzana"></p>
<p>Técnicamente usamos un mecanismo de paralelización y segmentación
(pipelining) en algunas etapas.</p>
<p>¿Y si decidiera dedicarme a la venta de las ensaladas en forma masiva?
La opción para poder producir ensaladas frescas en gran cantidad pasa
por paralelizar el trabajo de producción. Imagino líneas paralelas de
preparación de ingredientes, convergiendo en recipientes donde se
mezclan las verduras se empacan, en paralelo se hace lo mismo con las
salsas y los aderezos. La imagen es sencilla, supongo que les queda
clara la idea. Bueno, esa imagen refleja uno de los grandes secretos de
Google. El famoso algoritmo
<a href="http://labs.google.com/papers/mapreduce.html">MapReduce</a>.</p>
<p>En términos de ensaladas, tenemos una etapa inicial de preparación de
los ingredientes, cada ingrediente es depositado en un recipiente con
una etiqueta: &ldquo;manzanas verdes para ensalada con atún&rdquo;, &ldquo;manzanas para
ensaladas de frutas&rdquo;, &ldquo;tomates para pebre&rdquo;, &ldquo;tomates para ensalada&rdquo;,
etc. La clave es <strong>etiquetar y separar</strong>.</p>
<p><img src="ingredientes.jpg" alt="ingredientes"></p>
<p>Luego cada línea toma los recipientes para sus respectivas ensaladas. El
cocinero que mezcla los ingredientes los toma de las líneas respectivas
asignadas a su proceso de mezcla. El orden, la organización mediante el
etiquetado y clasificación es muy importante, pues facilita la labor del
cocinero.</p>
<p>A la primera fase de separar los ingredientes, picarlos, pelarlos, y
finalmente depositarlos en el contenedor con la etiqueta apropiada se le
llama la <strong>fase de mapeo</strong>. A la segunda etapa, cuando mezclamos los
ingredientes y armamos las ensaladas para depositarlas en sus platos o
envases la llamamos la <strong>fase de reducción</strong>.</p>
<p>Cuando procesamos grandes volúmenes de datos podemos usar esta técnica,
la que se describe en términos técnicos así:</p>
<blockquote>
<p>map(in key, in values) &ndash;&gt; list(out key, intermediate values)</p>
<ul>
<li>Procesa pares de llave/valor (key/value)</li>
<li>Produce un conjunto de pares intermedios</li>
</ul>
<p>reduce(out key, list(intermediate value)) &ndash;&gt; list(out value)</p>
<ul>
<li>Combina los valores intermedios de una llave particular</li>
<li>Produce un conjunto de valores de salidas consolidado (usualmente sólo
uno)</li>
</ul></blockquote>
<p>Si recuerdan el problema del censo que
<a href="/blog/2011/10/datos-datos-datos.html">describimos hace unos días atrás</a>,
lo que teníamos que calcular era la mediana de la edad por cada región.
Supongamos que los datos vienen en forma desordenada, la estrategia
MapReduce para resolver este problema es la siguiente:</p>
<blockquote>
<p>map(datos_censo) &ndash;&gt; list({región,sexo}, cuenta por edad según
{región,sexo})</p>
<ul>
<li>separa datos del censo determinando región, sexo y edad</li>
<li>usando la llave (región, sexo) cuenta por cada edad la frecuencia del
dato</li>
</ul>
<p>reduce({región,sexo},cuenta por edad según {región,sexo}) &ndash;&gt; mediana({región,sexo})</p>
<ul>
<li>recorre la cuenta de edades para esta llave {región,sexo}</li>
<li>determina la mediana, es decir, sabiendo la cantidad total de
habitantes de esta {región,sexo}, determina la edad que divide a las
personas en dos mitades (por debajo o por encima de esa edad)</li>
</ul></blockquote>
<p>Ambas etapas se podrían paralelizar, aunque la etapa <em>map</em> sería más
compleja de paralelizar que la etapa reduce (¿por qué?). Para una
cantidad de datos tan pequeña como la de la población de Chile quizás no
tiene mucho sentido, pero piensen si estamos determinando el censo
mundial, donde tenemos unos 6.500 millones de habitantes.</p>
<p>Incluso, como hemos visto, estos 6.500 millones de habitantes no son un
desafío formidable para un algoritmo como MapReduce, que es usado para
procesar volúmenes de datos mucho más grandes.</p>
<p>Pero esta técnica es muy ventajosa para tomar otro enfoque a problemas
que tradicionalmente son resueltos con bases de datos relacionales, pero
que se vuelven muy lentos de procesar debido al uso de <em>joins</em>, y los
famosos <em>full table scan</em>, que pueden llegar a ser imposible de
eliminar. No es que los sistemas relacionales no sean suficientemente
poderosos para resolver estos problemas, lo que pasa es que estos
métodos de paralelización permiten lograr tiempos mucho menores (a
costa, a veces, de una mayor complejidad de implementación en términos
de programación).</p>
<p>Cuidado, el grado de paralelización siempre estará sujeto a la
<a href="/blog/2009/09/el-problema-de-paralelizar.html">ley de Amdhal</a>.
Afortunadamente muchos de los problemas abordables con MapReduce son
<em><a href="http://www.lnds.net/blog/2009/09/el-problema-de-paralelizar-2.html">vergonzosamente paralelizables</a></em>
(como hacer ensaladas, calcular la frecuencia de palabras en muchos
textos, o
<a href="http://michaelnielsen.org/blog/using-mapreduce-to-compute-pagerank/">calcular el PageRank de las páginas web indexadas por Google</a>).</p>
<p>Así que hay una relación entre ensaladas y algoritmos, por lo que
recomiendo altamente practicar el arte culinario, es fuente de grandes
inspiraciones, y quien sabe que futuros desarrollos pueden surgir de la
simple experimentación y la mezcla de ingredientes, y si no se te ocurre
un gran algoritmo como MapReduce, puedes al menos disfrutar una fresca
ensalada.</p>
<h2 id="receta-ensalada-de-atún-con-manzanas"><strong>Receta</strong>: Ensalada de Atún Con Manzanas</h2>
<h3 id="ingredientes-para-4-personas"><strong>Ingredientes</strong> (para 4 personas):</h3>
<ul>
<li>
<p>2 manzanas verdes</p>
</li>
<li>
<p>1 lata de atún pequeña (mejor los lomitos de atún en agua)</p>
</li>
<li>
<p>1/2 lechuga picada</p>
</li>
<li>
<p>Mayonesa</p>
</li>
<li>
<p>Ketchup</p>
</li>
</ul>
<h3 id="instrucciones-los-ingenieros-a-esto-lo-llamamos-procedimiento"><strong>Instrucciones</strong> (los ingenieros a esto lo llamamos procedimiento):</h3>
<ul>
<li>
<p>Cortar las manzanas en rodajas, picar la lechuga. Mezclar con el
atún en un bol, o recipiente adecuado.</p>
</li>
<li>
<p>Mezclar mayonesa y ketchup, esto se conoce como <a href="http://es.wikipedia.org/wiki/Salsa_golf">salsa
golf</a> en Chile y Argentina.</p>
</li>
<li>
<p>Si está apurado aplique paralelismo mediante el algoritmo MapReduce :smile:</p>
</li>
</ul>
<p>Se puede mejorar con zanahoria, tomates picados, champiñones, nueces, o
espárragos. Mientras más ácidas las manzanas, mejor.</p>
</section></main>
        <footer id="main-footer"><div class="footer">
  <a href="#">Scroll to Top</a>
  <div class="footer-copyright">
    <div class="dim">© 2025 Eduardo Díaz</div>
    <div>Made with ❤️ and powered by <a href="https://github.com/math-queiroz/rusty-typewriter" target="_blank">Rusty Typewriter</a> theme for <a href="https://gohugo.io/" target="_blank">Hugo</a></div>
  </div>
</div>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-details">
    <span>987 words</span>
    <span>6 - 8 minutes read</span></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#receta-ensalada-de-atún-con-manzanas"><strong>Receta</strong>: Ensalada de Atún Con Manzanas</a>
      <ul>
        <li><a href="#ingredientes-para-4-personas"><strong>Ingredientes</strong> (para 4 personas):</a></li>
        <li><a href="#instrucciones-los-ingenieros-a-esto-lo-llamamos-procedimiento"><strong>Instrucciones</strong> (los ingenieros a esto lo llamamos procedimiento):</a></li>
      </ul>
    </li>
  </ul>
</nav><h3>Attachments</h3>
    <ul><li><a href="http://localhost:1313/blog/lnds/2011/10/16/ensaladas-y-algoritmos/atun-con-manzana.jpg">atun-con-manzana.jpg</a></li><li><a href="http://localhost:1313/blog/lnds/2011/10/16/ensaladas-y-algoritmos/ingredientes.jpg">ingredientes.jpg</a></li></ul><h3>Related</h3>
    <ul><li><a href="/blog/lnds/2011/10/03/datos-datos-datos/">Datos, datos, datos...</a></li><li><a href="/blog/lnds/2011/08/07/un-mundo-controlado-por-algoritmos/">Un mundo controlado por algoritmos</a></li><li><a href="/blog/lnds/2010/08/22/p-versus-np/">P versus NP</a></li><li><a href="/blog/lnds/2010/07/30/los-panqueques-de-bill-gates/">Los panqueques de Bill Gates</a></li><li><a href="/blog/lnds/2010/04/13/el-poder-de-un-algoritmo/">El poder de un algoritmo</a></li></ul></aside></div>
  </div>
</body>
</html>
